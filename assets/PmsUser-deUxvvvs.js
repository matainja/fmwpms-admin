import{j as e,ao as Qe,bF as es,bG as ss,bh as ne,aU as Ve,A as B,af as K,r as f,a4 as re,b0 as oe,b1 as T,b2 as Z,bH as Ne,bI as Ce,B as S,aa as y,_ as ts,$ as Ae,bJ as Be,T as pe,ax as as,bk as Me,bq as is,a8 as ce,bv as ls,bK as ns,a as Re,bL as rs,b9 as ve,u as E,h as J,bM as os,bw as ye,a7 as Y,bN as cs,bO as we,bP as ds,c as Oe,bQ as ee,bR as ms,bS as fs,bT as us,bU as hs,bV as xs,bW as ps,bX as gs,bY as js,bZ as vs,bA as Te,bj as _e}from"./index-Df7F332m.js";import{G as ws,u as Ss,f as Fe,g as bs,h as Is,i as Ns,R as Cs}from"./SvgIcon-CQcPbuhV.js";import{C as ys}from"./Views-cPxQQlqC.js";import{N as _s}from"./react-number-format.es-B0dZRfW9.js";import{M as Fs}from"./MediaSkeleton-BjkWvQ3N.js";import{A as Le}from"./AdaptableCard-z7BGjZuK.js";import{d as P,a as U}from"./defaultErrorMessage.constant-Bll1G2ZT.js";import{u as Se,q as He,m as Es,r as Ps,s as Us,t as Ds,v as ks,w as Vs,x as As,y as Bs,z as Ms,A as Rs}from"./useNavigation-C3EE1y9N.js";import{u as ze}from"./useAccessibility-B2WE6TxX.js";import{u as A}from"./useStaff-CzFT4Gav.js";import{N as Os}from"./NotFound-CqM3s290.js";import{F as de,c as be,a as me,b as G,e as se,f as qe}from"./index.esm-Dj8_cvlD.js";import{d as Ts,e as Ls}from"./index-Bx8Ji4ut.js";import{U as Hs,P as Ie,a as zs,b as qs,c as $s,d as $e,D as Gs,e as fe,f as Ws,g as Xs,h as Ks,i as Q,j as Ee,k as Zs,l as Js,m as ge,n as Ys,o as Qs,p as et,q as st,r as tt,s as at,t as it,u as lt,v as nt,w as rt,x as ot,y as ct,z as dt,A as mt,B as ft,C as ut,E as ht,F as xt,G as pt,H as gt,I as jt,J as vt,K as wt,L as St,M as je,N as bt,O as It,Q as Nt,R as Ct}from"./AccessInformation-CBAlXOKG.js";import{H as le}from"./Header-q0G6RIHH.js";import{D as yt}from"./DoubleSidedImage-CCTnKhfF.js";import{l as X}from"./lodash-Yws9CGt_.js";import{S as k}from"./StaffInfoFeild-D4nNy8GZ.js";import{b as Pe,c as _t,d as Ft}from"./index-CaeVh7KY.js";import{i as Ge}from"./isLastChild-BgvHfb_g.js";import{F as W}from"./FormImageChoose-C8xabBOd.js";import{R as Et}from"./RoleAndAccessbility-Cx_KXpBu.js";import{E as Pt,i as We}from"./staffForm-DV30AAPx.js";import"./cloneDeep-DJN0yfLA.js";import"./useThemeClass-D8-ALEtE.js";import"./index-BO7qGiNs.js";import"./useDepartment-D7pgVS84.js";const xe=s=>{const{icon:i,avatarClass:t,label:a,value:d,growthRate:o,loading:c,onClickedFunction:m}=s,h=55;return e.jsx(ne,{bordered:!0,onClick:()=>m==null?void 0:m(a||""),className:`${m?"cursor-pointer":"cursor-default"}`,children:e.jsx(Ve,{loading:c,customLoader:e.jsx(Fs,{avatarProps:{className:"rounded",width:h,height:h}}),children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(B,{className:t,size:h,icon:i}),e.jsxs("div",{children:[e.jsx("span",{children:a}),e.jsx("h3",{children:e.jsx(_s,{thousandSeparator:!0,displayType:"text",value:d})})]})]}),e.jsx(ws,{value:o,suffix:"%"})]})})})},Ut=({total:s,active:i,blocked:t,onClickedFunction:a})=>e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[e.jsx(xe,{icon:e.jsx(Qe,{}),avatarClass:"!bg-indigo-600",label:s.label,value:s.value,growthRate:s.growShrink,loading:!1,onClickedFunction:a}),e.jsx(xe,{icon:e.jsx(es,{}),avatarClass:"!bg-indigo-600",label:i.label,value:i.value,growthRate:i.growShrink,loading:!1,onClickedFunction:a}),e.jsx(xe,{icon:e.jsx(ss,{}),avatarClass:"!bg-emerald-500",label:t.label,value:t.value,growthRate:t.growShrink,loading:!1,onClickedFunction:a})]});function Dt(s){return K({attr:{viewBox:"0 0 24 24",fill:"currentColor"},child:[{tag:"path",attr:{d:"M18 8H20C20.5523 8 21 8.44772 21 9V21C21 21.5523 20.5523 22 20 22H4C3.44772 22 3 21.5523 3 21V9C3 8.44772 3.44772 8 4 8H6V7C6 3.68629 8.68629 1 12 1C15.3137 1 18 3.68629 18 7V8ZM5 10V20H19V10H5ZM11 14H13V16H11V14ZM7 14H9V16H7V14ZM15 14H17V16H15V14ZM16 8V7C16 4.79086 14.2091 3 12 3C9.79086 3 8 4.79086 8 7V8H16Z"},child:[]}]})(s)}function kt(s){return K({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 17v4"},child:[]},{tag:"path",attr:{d:"M10 20l4 -2"},child:[]},{tag:"path",attr:{d:"M10 18l4 2"},child:[]},{tag:"path",attr:{d:"M5 17v4"},child:[]},{tag:"path",attr:{d:"M3 20l4 -2"},child:[]},{tag:"path",attr:{d:"M3 18l4 2"},child:[]},{tag:"path",attr:{d:"M19 17v4"},child:[]},{tag:"path",attr:{d:"M17 20l4 -2"},child:[]},{tag:"path",attr:{d:"M17 18l4 2"},child:[]},{tag:"path",attr:{d:"M9 6a3 3 0 1 0 6 0a3 3 0 0 0 -6 0"},child:[]},{tag:"path",attr:{d:"M7 14a2 2 0 0 1 2 -2h6a2 2 0 0 1 2 2"},child:[]}]})(s)}const Vt=be().shape({password:se().required("New Password is required").min(6,"Password must be at least 6 characters"),password_confirmation:se().required("Confirm Password is required").oneOf([qe("password")],"Passwords must match")}),At=({visible:s,onClose:i,staffId:t})=>{const[a,d]=f.useState(!1),[o,c]=f.useState(!1),{updateStaffPasword:m}=A(),h=async(p,{setSubmitting:l,resetForm:r})=>{const n={staff_id:t,password:p.password},u=await m(n);y((u==null?void 0:u.status)||U,(u==null?void 0:u.message)||P),(u==null?void 0:u.status)==="success"&&(i(),r()),l(!1)};return e.jsx(re,{title:"Reset Password",isOpen:s,onClose:i,placement:"right",width:400,children:e.jsxs("div",{className:"space-y-6 px-2 py-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Reset password for ",e.jsx("strong",{children:t})]}),e.jsx(de,{initialValues:{password:"",password_confirmation:""},validationSchema:Vt,onSubmit:h,children:({errors:p,touched:l,isSubmitting:r})=>e.jsx(me,{children:e.jsxs(oe,{className:"space-y-4",children:[e.jsx(T,{label:"* New Password",invalid:!!(p.password&&l.password),errorMessage:p.password,children:e.jsx(G,{name:"password",type:a?"text":"password",placeholder:"Enter new password",component:Z,suffix:e.jsx("span",{className:"cursor-pointer",onClick:()=>d(n=>!n),children:a?e.jsx(Ne,{}):e.jsx(Ce,{})})})}),e.jsx(T,{label:"* Confirm Password",invalid:!!(p.password_confirmation&&l.password_confirmation),errorMessage:p.password_confirmation,children:e.jsx(G,{name:"password_confirmation",type:o?"text":"password",placeholder:"Re-enter password",component:Z,suffix:e.jsx("span",{className:"cursor-pointer",onClick:()=>c(n=>!n),children:o?e.jsx(Ne,{}):e.jsx(Ce,{})})})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(S,{variant:"solid",type:"submit",loading:r,children:"Submit"}),e.jsx(S,{variant:"twoTone",onClick:i,children:"Cancel"})]})]})})})]})})},Bt=be().shape({ippis_no:se().required("IPPIS No. is required").matches(/^\d+$/,"IPPIS No. must be numeric").min(4,"IPPIS No. must be at least 4 digits"),confirm_ippis_no:se().oneOf([qe("ippis_no"),null],"IPPIS No. does not match").required("Please confirm IPPIS No.")}),Mt=({visible:s,onClose:i,staffId:t,onSuccess:a})=>{const{updateStaffIppisNo:d}=A(),o=async(c,{setSubmitting:m,resetForm:h})=>{const p={staff_id:t,ippis_no:c.ippis_no},l=await d(p);y((l==null?void 0:l.status)||U,(l==null?void 0:l.message)||P),(l==null?void 0:l.status)==="success"&&(h(),i(),a==null||a(c.ippis_no)),m(!1)};return e.jsx(re,{title:"Reset IPPIS No.",isOpen:s,onClose:i,placement:"right",width:400,children:e.jsxs("div",{className:"space-y-6 px-2 py-4",children:[e.jsxs("p",{className:"text-sm text-gray-600",children:["Reset IPPIS No. for ",e.jsx("strong",{children:t})]}),e.jsx(de,{initialValues:{ippis_no:"",confirm_ippis_no:""},validationSchema:Bt,onSubmit:o,children:({errors:c,touched:m,isSubmitting:h})=>e.jsx(me,{children:e.jsxs(oe,{className:"space-y-4",children:[e.jsx(T,{label:"* New IPPIS No.",invalid:!!(c.ippis_no&&m.ippis_no),errorMessage:c.ippis_no,children:e.jsx(G,{name:"ippis_no",type:"text",placeholder:"Enter new IPPIS No.",component:Z})}),e.jsx(T,{label:"* Confirm IPPIS No.",invalid:!!(c.confirm_ippis_no&&m.confirm_ippis_no),errorMessage:c.confirm_ippis_no,children:e.jsx(G,{name:"confirm_ippis_no",type:"text",placeholder:"Re-enter new IPPIS No.",component:Z})}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx(S,{variant:"solid",type:"submit",loading:h,children:"Submit"}),e.jsx(S,{variant:"twoTone",onClick:i,children:"Cancel"})]})]})})})]})})},{Tr:Ue,Th:Rt,Td:Ot,THead:Tt,TBody:Lt}=Me,De=[{value:10,label:"10 / page"},{value:20,label:"20 / page"},{value:30,label:"30 / page"},{value:40,label:"40 / page"},{value:50,label:"50 / page"}],Ht=({userData:s,filter:i})=>{const{editStaffActive:t}=A(),[a,d]=f.useState([]),[o,c]=f.useState(0),[m,h]=f.useState(!1),[p,l]=f.useState(""),[r,n]=f.useState(!1),[u,N]=f.useState(!1),{Navigate:g}=Se(),{canAccess:v}=ze(),[w,D]=f.useState(!1),[b,V]=f.useState(!1),[I,_]=f.useState(""),[M,L]=f.useState("");f.useEffect(()=>{v(ts)?n(!0):n(!1),v(Ae)?N(!0):N(!1)},[]);const H=()=>{if(i=="")d(s);else{let x=0;i==="active"?x=1:x=0;const j=s.filter($=>$.is_active==x);d(j)}m?h(!1):F.setPageIndex(0)};f.useEffect(()=>{d(s),H()},[s]),f.useEffect(()=>{const x=setTimeout(()=>{const j=F.getState().pagination.pageIndex;F.getRowModel().rows.length===0&&j>0&&F.setPageIndex(j-1)},100);return()=>clearTimeout(x)},[a]),f.useEffect(()=>{c(a.length)},[a]),f.useEffect(()=>{H()},[i]);const R=f.useMemo(()=>[{header:"staff id",accessorKey:"staff_id"},{header:"ippis no",accessorKey:"ippis_no"},{header:"name",accessorKey:"name",cell:x=>{const j=x.row.original;return e.jsxs("div",{className:"flex items-center",children:[j.img!==""?e.jsx(B,{className:"mr-4",src:j.img}):e.jsx(B,{className:"mr-4",icon:e.jsx(Be,{})}),e.jsx(pe,{title:j.name,children:e.jsx("span",{className:"w-full truncate",children:j.name})})]})}},{header:"email",accessorKey:"email"},{header:"active",accessorKey:"is_active",cell:x=>{const j=x.row.original;return e.jsx(as,{onChange:()=>ue(j.staff_id),checked:j.is_active===1,isLoading:m})}},{header:"type",accessorKey:"type"},{header:"grade level",accessorKey:"grade_level"},{header:"action",accessorKey:"",cell:x=>{const j=x.row.original;return e.jsxs("div",{className:"flex  items-center",children:[u&&j.is_active===1&&e.jsx(S,{shape:"circle",size:"xs",className:"mr-2 ",variant:"solid",color:"emerald-500",onClick:()=>he(j.staff_id),children:"Edit"}),r&&e.jsx(S,{shape:"circle",size:"xs",className:"mr-2",variant:"solid",color:"emerald-500",onClick:()=>C(j.staff_id),children:"View"}),r&&e.jsx(S,{shape:"circle",size:"xs",className:"mr-2 ",variant:"solid",color:"emerald-500",onClick:()=>z(j.staff_id),children:e.jsx(Dt,{})}),u&&j.is_active===1&&e.jsx(S,{shape:"circle",size:"xs",className:"mr-2 ",variant:"solid",color:"emerald-500",onClick:()=>O(j.staff_id),children:e.jsx(kt,{})})]})}}],[u,r]),F=Ss({data:a,columns:R,getCoreRowModel:Ns(),getFilteredRowModel:Is(),getPaginationRowModel:bs(),autoResetPageIndex:!1}),ue=async x=>{if(l(x),u){h(!0);const j=await t(x);(j==null?void 0:j.status)==="success"&&d($=>$.map(ie=>ie.staff_id===x?{...ie,is_active:ie.is_active===1?0:1}:ie)),y((j==null?void 0:j.status)||U,(j==null?void 0:j.message)||P)}else y("danger","You have not access to do this");l("")},he=x=>{g(He,x)},C=x=>{g(Es,x)},z=x=>{_(x),D(!0)},O=x=>{L(x),V(!0)},q=x=>{d(j=>j.map($=>$.staff_id===M?{...$,ippis_no:x}:$))},te=x=>{F.setPageIndex(x-1)},ae=(x=0)=>{F.setPageSize(Number(x))};return a.length===0?e.jsx(Os,{}):e.jsxs("div",{children:[e.jsxs(Me,{className:"cursor-default",children:[e.jsx(Tt,{children:F.getHeaderGroups().map(x=>e.jsx(Ue,{children:x.headers.map(j=>e.jsx(Rt,{colSpan:j.colSpan,children:Fe(j.column.columnDef.header,j.getContext())},j.id))},x.id))}),e.jsx(Lt,{children:F.getRowModel().rows.map(x=>e.jsx(Ue,{className:`p-0 ${p===x.original.staff_id?"opacity-50 pointer-events-none":""}`,children:x.getVisibleCells().map(j=>e.jsx(Ot,{className:"p-0 m-0",children:Fe(j.column.columnDef.cell,j.getContext())},j.id))},x.id))})]}),e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsx(is,{pageSize:F.getState().pagination.pageSize,currentPage:F.getState().pagination.pageIndex+1,total:o,onChange:te}),e.jsx("div",{style:{minWidth:130},children:e.jsx(ce,{size:"sm",isSearchable:!1,value:De.filter(x=>x.value===F.getState().pagination.pageSize),options:De,onChange:x=>ae(x==null?void 0:x.value)})})]}),e.jsx(At,{visible:w,onClose:()=>D(!1),staffId:I}),e.jsx(Mt,{visible:b,onClose:()=>V(!1),staffId:M,onSuccess:q})]})},zt=({search:s,onInputChange:i})=>{const t=a=>{i(a.target.value)};return e.jsx(Z,{className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search",prefix:e.jsx(ls,{className:"text-lg"}),value:s,onChange:a=>t(a)})},{Control:qt}=ns,ke=[{value:"",label:"All",color:"bg-gray-500"},{value:"active",label:"Active",color:"bg-emerald-500"},{value:"blocked",label:"Blocked",color:"bg-red-500"}],$t=({innerProps:s,label:i,data:t,isSelected:a})=>e.jsxs("div",{className:`flex items-center justify-between p-2 cursor-pointer ${a?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600"}`,...s,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{innerClass:t.color}),e.jsx("span",{children:i})]}),a&&e.jsx(rs,{className:"text-emerald-500 text-xl"})]}),Gt=({children:s,...i})=>{const t=i.getValue()[0];return e.jsxs(qt,{...i,children:[t&&e.jsx(Re,{className:"ltr:ml-4 rtl:mr-4",innerClass:t.color}),s]})},Wt=({filter:s,onFilterChange:i})=>{const[t,a]=f.useState("");f.useEffect(()=>{a(s)},[s]);const d=o=>{i((o==null?void 0:o.value)||"")};return e.jsx(ce,{options:ke,size:"sm",className:"mb-4 min-w-[130px]",components:{Option:$t,Control:Gt},value:ke.filter(o=>o.value===t),onChange:d})};function Xt(s){return K({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#90CAF9",points:"40,45 8,45 8,3 30,3 40,13"},child:[]},{tag:"polygon",attr:{fill:"#E1F5FE",points:"38.5,14 29,14 29,4.5"},child:[]},{tag:"polygon",attr:{fill:"#1565C0",points:"21,23 14,33 28,33"},child:[]},{tag:"polygon",attr:{fill:"#1976D2",points:"28,26.4 23,33 33,33"},child:[]},{tag:"circle",attr:{fill:"#1976D2",cx:"31.5",cy:"24.5",r:"1.5"},child:[]}]})(s)}const Kt=({buttonShow:s=!1,buttonText:i="",onDialogClose:t})=>{const[a,d]=f.useState(null),{addBulkStaff:o}=A(),c=Hs,m=l=>{if(l.length>0){const r=l[0];d(r)}},h=l=>{let r=!0;const n=["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"];if(l)for(const u of l)n.includes(u.type)||(r="Please upload a .xlxs");return r},p=async()=>{const l={file:a};if(!l.file){y("danger","Please add file");return}const r=await o(l);y((r==null?void 0:r.status)||U,(r==null?void 0:r.message)||P),(r==null?void 0:r.status)==="success"&&(t==null||t())};return e.jsxs("div",{className:"h-full",children:[e.jsx(ve,{draggable:!0,uploadLimit:c,beforeUpload:h,onChange:m,children:e.jsxs("div",{className:"my-16 text-center",children:[e.jsx("div",{className:"text-6xl mb-4 flex justify-center",children:e.jsx(Xt,{})}),e.jsxs("p",{className:"font-semibold",children:[e.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Drop your file here, or"," "]}),e.jsx("span",{className:"text-blue-500",children:"browse"})]}),e.jsx("p",{className:"mt-1 opacity-60 dark:text-white",children:"Support: .xlxs"})]})}),s&&e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(S,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:t,children:Ie}),e.jsx(S,{variant:"solid",onClick:p,children:i})]})]})},Zt=({buttonShow:s=!1,buttonText:i="",onDialogClose:t})=>{const a=E(r=>r.staffEvidenceOption),{deleteStaffEvidanceById:d}=A(),[o,c]=f.useState([]),[m,h]=f.useState(!1),p=(r,n)=>{c(r)},l=async()=>{h(!0);const r=o.map(N=>N.staff_id);if(r.length===0){y("warning","Please select atleast 1 user who have evidance"),h(!1);return}const u=await d({staff_ids:r});(u==null?void 0:u.status)==="success"&&(t==null||t()),y((u==null?void 0:u.status)||U,(u==null?void 0:u.message)||P),h(!1)};return e.jsxs("div",{children:[e.jsx(ce,{isMulti:!0,placeholder:"Please Select",options:a,onChange:p}),s&&e.jsxs("div",{className:"text-right mt-6",children:[e.jsx(S,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:t,children:Ie}),e.jsx(S,{variant:"solid",onClick:l,loading:m,children:i})]})]})},Jt=be().shape({selectedStaff:se().required("Select staff Required")}),Yt=({search:s,onSearch:i,filter:t,onFilter:a})=>{J(),E(C=>C.userDetails);const d=E(C=>C.freeStaff.freeStaffOption),[o,c]=f.useState(!1),[m,h]=f.useState(!1),[p,l]=f.useState(0),[r,n]=f.useState(!1),[u,N]=f.useState(!1),{Navigate:g}=Se(),{canAccess:v}=ze(),{getFreeStaff:w,getStaffDowloadlist:D}=A();f.useEffect(()=>{v(Ae)?c(!0):c(!1)},[]);const b=()=>{M(),l(0)},V=()=>{n(!0)},I=()=>{N(!0)},_=async()=>{try{const C=await D(),z=C==null?void 0:C.data;if(!z)throw new Error("blob is not converted");const O=window.URL.createObjectURL(z),q=document.createElement("a");q.href=O,q.download="user_list.xlsx",document.body.appendChild(q),q.click(),document.body.removeChild(q),window.URL.revokeObjectURL(O)}catch(C){console.error("Download failed:",C)}},M=()=>{h(!0)},L=()=>{h(!1)},H=()=>{n(!1)},R=()=>{N(!1)},F=()=>{L(),g(Us)},ue=async()=>{const C=await w();(C==null?void 0:C.status)!=="success"&&y((C==null?void 0:C.status)||U,(C==null?void 0:C.message)||P),l(1)},he=()=>{l(p-1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsxs("div",{className:"md:flex items-center gap-4",children:[e.jsx(zt,{search:s,onInputChange:i}),e.jsx(Wt,{filter:t,onFilterChange:a})]}),e.jsx("div",{className:"ms-4 mb-4",children:o&&e.jsxs(e.Fragment,{children:[e.jsx(S,{size:"sm",variant:"solid",icon:e.jsx(Ts,{}),onClick:_,className:"me-4 mb-4 lg:mb-0",children:"User List"}),v(os)&&e.jsx(e.Fragment,{children:e.jsx(S,{size:"sm",variant:"solid",icon:e.jsx(Ls,{}),onClick:I,className:"me-4 mb-4 lg:mb-0",children:"Evidance Delete"})}),e.jsx(S,{size:"sm",variant:"solid",icon:e.jsx(ye,{}),onClick:V,className:"me-4",children:"Upload bulk user"}),e.jsx(S,{size:"sm",variant:"solid",icon:e.jsx(ye,{}),onClick:b,children:"Add user"})]})})]}),e.jsxs(Y,{isOpen:m,onClose:L,onRequestClose:L,children:[p===0&&e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Confirmation"}),e.jsxs("div",{className:"text-center",children:[e.jsx(S,{className:"ltr:mr-2 rtl:ml-2 mb-4",variant:"solid",onClick:F,children:"Add Custom User"}),e.jsx(S,{className:"ltr:mr-2 rtl:ml-2",variant:"solid",onClick:ue,children:"Get From Centeralized System"})]})]}),p===1&&e.jsxs(e.Fragment,{children:[e.jsx(le,{title:"Select user data to fetch"}),e.jsx(de,{initialValues:{selectedStaff:""},validationSchema:Jt,onSubmit:(C,{resetForm:z,setSubmitting:O})=>{g(Ps,C.selectedStaff),setTimeout(()=>{O(!1),z()},400)},children:({values:C,touched:z,errors:O,resetForm:q})=>e.jsx(me,{children:e.jsxs(oe,{children:[e.jsx(T,{asterisk:!0,label:"Select",invalid:O.selectedStaff&&z.selectedStaff,errorMessage:O.selectedStaff,children:e.jsx(G,{name:"selectedStaff",children:({field:te,form:ae})=>e.jsx(ce,{field:te,form:ae,options:d,value:d.filter(x=>x.staff_id===C.selectedStaff),onChange:x=>ae.setFieldValue(te.name,x==null?void 0:x.staff_id)})})}),e.jsxs(T,{children:[e.jsx(S,{type:"reset",className:"ltr:mr-2 rtl:ml-2",onClick:he,children:"Back"}),e.jsx(S,{variant:"solid",type:"submit",children:"Fetch Data"})]})]})})})]})]}),e.jsx(Y,{isOpen:r,onClose:H,onRequestClose:H,children:e.jsx(Kt,{buttonShow:!0,buttonText:zs,onDialogClose:H})}),e.jsx(Y,{isOpen:u,onClose:R,onRequestClose:R,children:e.jsx(Zt,{buttonShow:!0,buttonText:qs,onDialogClose:R})})]})},Qt=({id:s})=>{const{Navigate:i}=Se(),t=()=>{i(He,String(s))};return e.jsx(e.Fragment,{children:e.jsx(S,{block:!0,icon:e.jsx(cs,{}),variant:"solid",onClick:t,children:$s})})},ea=({data:s={},showButton:i=!0})=>{const t=J(),a=E(o=>o.userDetails),d=()=>{const o={...a,modal:!0,category:$e,id:String(s.staff_id),height:250,width:500};t(we(o))};return e.jsx(ne,{children:e.jsxs("div",{className:"flex flex-col xl:justify-between h-full 2xl:min-w-[360px] mx-auto",children:[e.jsxs("div",{className:"flex xl:flex-col items-center gap-4",children:[s.img===""?e.jsx(B,{size:90,shape:"circle",icon:e.jsx(Be,{}),onClick:d,className:"cursor-pointer"}):e.jsx(B,{size:90,shape:"circle",src:s.img,onClick:d,className:"cursor-pointer"}),e.jsxs("h4",{className:"font-bold",children:[s.F_name," ",s.M_name," ",s.L_name]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-y-7 gap-x-4 mt-8",children:[e.jsx(k,{title:"Email:",value:s.email,customClassName:"flex gap-1 w-full truncate"}),e.jsx(k,{title:"Phone:",value:s.phone,customClassName:"flex gap-1 w-full truncate"}),e.jsx(k,{title:"Gender:",value:s.gender,customClassName:"flex gap-1 w-full truncate"}),e.jsx(k,{title:"Role:",value:s.role,customClassName:"flex gap-1 w-full truncate"})]}),i&&e.jsx("div",{className:"mt-4 flex flex-col xl:flex-row gap-2",children:e.jsx(Qt,{id:s.staff_id})})]})})};function sa(s){return K({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z"},child:[]}]})(s)}function ta(s){return K({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M64 464l48 0 0 48-48 0c-35.3 0-64-28.7-64-64L0 64C0 28.7 28.7 0 64 0L229.5 0c17 0 33.3 6.7 45.3 18.7l90.5 90.5c12 12 18.7 28.3 18.7 45.3L384 304l-48 0 0-144-80 0c-17.7 0-32-14.3-32-32l0-80L64 48c-8.8 0-16 7.2-16 16l0 384c0 8.8 7.2 16 16 16zM176 352l32 0c30.9 0 56 25.1 56 56s-25.1 56-56 56l-16 0 0 32c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-48 0-80c0-8.8 7.2-16 16-16zm32 80c13.3 0 24-10.7 24-24s-10.7-24-24-24l-16 0 0 48 16 0zm96-80l32 0c26.5 0 48 21.5 48 48l0 64c0 26.5-21.5 48-48 48l-32 0c-8.8 0-16-7.2-16-16l0-128c0-8.8 7.2-16 16-16zm32 128c8.8 0 16-7.2 16-16l0-64c0-8.8-7.2-16-16-16l-16 0 0 96 16 0zm80-112c0-8.8 7.2-16 16-16l48 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 32 32 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-32 0 0 48c0 8.8-7.2 16-16 16s-16-7.2-16-16l0-64 0-64z"},child:[]}]})(s)}function aa(s){return K({attr:{t:"1569683621237",viewBox:"0 0 1024 1024",version:"1.1"},child:[{tag:"path",attr:{d:"M944 299H692c-4.4 0-8 3.6-8 8v406c0 4.4 3.6 8 8 8h59.2c4.4 0 8-3.6 8-8V549.9h168.2c4.4 0 8-3.6 8-8V495c0-4.4-3.6-8-8-8H759.2V364.2H944c4.4 0 8-3.6 8-8V307c0-4.4-3.6-8-8-8zM588 300h-56c-4.4 0-8 3.6-8 8v406c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8V308c0-4.4-3.6-8-8-8zM452 500.9H290.5c-4.4 0-8 3.6-8 8v43.7c0 4.4 3.6 8 8 8h94.9l-0.3 8.9c-1.2 58.8-45.6 98.5-110.9 98.5-76.2 0-123.9-59.7-123.9-156.7 0-95.8 46.8-155.2 121.5-155.2 54.8 0 93.1 26.9 108.5 75.4h76.2c-13.6-87.2-86-143.4-184.7-143.4C150 288 72 375.2 72 511.9 72 650.2 149.1 736 273 736c114.1 0 187-70.7 187-181.6v-45.5c0-4.4-3.6-8-8-8z"},child:[]}]})(s)}const Xe=({type:s="",url:i="",className:t="",clickAble:a=!1,evidanceID:d=""})=>{const{getStaffEvidanceFileByIdTemporary:o}=A(),c=async()=>{if(a){const h=await o(d);if(h!=null&&h.data){const p=new Blob([h.data],{type:"application/pdf"}),l=URL.createObjectURL(p);window.open(l)}}},m=()=>s.toUpperCase()==="PDF"?e.jsx(B,{className:`mr-4 ${a&&"cursor-pointer"}`,icon:e.jsx(ta,{}),onClick:c}):s.toUpperCase()==="JPEG"||s.toUpperCase()==="PNG"?e.jsx(B,{className:`mr-4 ${t}`,src:i}):s.toUpperCase()==="DOC"||s.toUpperCase()==="DOCX"?e.jsx(B,{className:"mr-4",icon:e.jsx(Pe,{})}):s.toUpperCase()==="XLS"||s.toUpperCase()==="XLSX"?e.jsx(B,{className:"mr-4",icon:e.jsx(_t,{})}):s.toUpperCase()==="GIF"?e.jsx(B,{className:"mr-4",icon:e.jsx(aa,{})}):e.jsx(B,{className:"mr-4",icon:e.jsx(Pe,{})});return e.jsx("div",{children:m()})},Ke=({isOpen:s=!1,onDialogClose:i,onButtonFunction:t,isLoading:a=!1})=>e.jsxs(Y,{isOpen:s,bodyOpenClassName:"overflow-hidden",onClose:i,onRequestClose:i,children:[e.jsx(le,{title:Gs}),e.jsx("p",{className:"text-lg",children:"Are you sure want to delete the Evidance?"}),e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(S,{variant:"solid",size:"sm",color:"red-600",icon:e.jsx(ds,{}),onClick:t,loading:a,children:"Delete"})})]}),Ze=({showNumber:s=0,textWidthClassName:i="w-full"})=>{const t=J(),a=E(g=>g.currentStaff)[0],d=E(g=>g.currentStaffEvidance),o=E(g=>g.userEvidanceDrawer),[c,m]=f.useState(!1),{deleteStaffEvidanceByEvidanceId:h}=A(),p=f.useRef(!1),l=f.useRef(-1),r=async()=>{p.current=!0;const g={staff_id:a.staff_id,evidanceId:String(d[l.current].id)},v=await h(g);y((v==null?void 0:v.status)||U,(v==null?void 0:v.message)||P),p.current=!1,u()},n=g=>{m(!0),l.current=g},u=()=>{m(!1)},N=g=>{const v={...o,isOpen:!0,staffId:a.staff_id,evidanceId:String(d[g].id)};t(ee(v))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600",children:d.map((g,v)=>e.jsxs("div",{className:Oe("flex flex-col lg:flex-row lg:items-center justify-between gap-3 p-4",s!==0&&v>s&&"hidden",!Ge(d,v)&&"border-b border-gray-200 dark:border-gray-600"),children:[e.jsxs("div",{className:`flex items-center gap-3 ${i} truncate`,children:[e.jsx(Xe,{type:g.file_type,url:g.file_path}),e.jsx("div",{className:"",children:e.jsx("div",{className:"text-gray-900 dark:text-gray-100 font-semibold",children:g.name})})]}),e.jsxs("div",{className:"flex",children:[e.jsx(S,{className:"mr-2 rtl:ml-2",variant:"plain",size:"sm",onClick:()=>n(v),children:"Delete"}),e.jsx(S,{icon:e.jsx(Ft,{}),size:"sm",onClick:()=>N(v),children:"View"})]})]},v))}),e.jsx(Ke,{isOpen:c,onDialogClose:u,onButtonFunction:r,isLoading:p.current})]})},ia=({data:s})=>{const{deleteStaffEvidanceByEvidanceId:i}=A(),t=async()=>{const o={staff_id:(s==null?void 0:s.staff_id)||"",evidanceId:String(s==null?void 0:s.id)},c=await i(o);y((c==null?void 0:c.status)||U,(c==null?void 0:c.message)||P)},a=o=>{const c=document.createElement("textarea");c.value=o,c.style.position="fixed",document.body.appendChild(c),c.focus(),c.select();try{if(document.execCommand("copy"))y("success","Copy to clipboard");else throw new Error("Fallback copy failed.")}catch(m){console.error("Fallback copy error:",m),y("danger","Failed to copy. Please copy manually.")}document.body.removeChild(c)},d=o=>{var c;(c=navigator==null?void 0:navigator.clipboard)!=null&&c.writeText?navigator.clipboard.writeText(o).then(()=>{y("success","Copy to clipboard")}).catch(m=>{console.error("Clipboard API error:",m),a(o)}):a(o)};return e.jsxs("div",{className:"grid gap-4",children:[e.jsx(k,{title:"name",value:s==null?void 0:s.name}),e.jsx(k,{title:"description",value:s==null?void 0:s.description,convertValue:!0}),e.jsx(Xe,{type:s==null?void 0:s.file_type,url:s==null?void 0:s.file_path,className:"w-full h-full",clickAble:!0,evidanceID:s==null?void 0:s.evidence_id}),e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(S,{className:"mr-2 rtl:ml-2",variant:"solid",size:"sm",onClick:t,children:"Delete"}),e.jsx(S,{className:"mr-2 rtl:ml-2",variant:"plain",size:"sm",icon:e.jsx(sa,{}),onClick:()=>d((s==null?void 0:s.file_path)||""),children:"copy"})]})]})};function Je(s){return K({attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"48",d:"M328 112 184 256l144 144"},child:[]}]})(s)}const la=s=>{const i=J(),t=E(m=>m.userEvidanceDrawer),a=E(m=>m.currentStaffEvidance),d=()=>a.find(m=>String(m.id)===String(t.evidanceId)),o=()=>{const m={...t,evidanceId:"all"};i(ee(m))},c=()=>{const m={...t,isOpen:!1,staffId:"",evidanceId:""};i(ee(m))};return e.jsxs(re,{title:e.jsxs("div",{className:"flex gap-2 items-center",children:[t.evidanceId!=="all"&&e.jsx(S,{icon:e.jsx(Je,{}),onClick:o}),e.jsx("h5",{children:"Evidance details"})]}),isOpen:t.isOpen,onClose:c,onRequestClose:c,children:[t.evidanceId==="all"&&e.jsx(Ze,{}),t.evidanceId!=="all"&&e.jsx(ia,{data:d()})]})},na=({showViewAllButton:s=!0})=>{const i=J(),t=E(N=>N.currentStaff)[0],a=E(N=>N.currentStaffEvidance),d=E(N=>N.userEvidanceDrawer),[o,c]=f.useState(!1),{deleteStaffEvidanceById:m}=A(),h=f.useRef(!1),p=()=>{if(d.isOpen){const g={...d,isOpen:!1,staffId:"",evidanceId:""};i(ee(g))}const N={modal:!0,id:t.staff_id,category:Q,type:Q,action:ge,height:Js,width:Zs};i(we(N))},l=async()=>{h.current=!0;const N={staff_ids:[t.staff_id],currentStaffId:t.staff_id},g=await m(N);y((g==null?void 0:g.status)||U,(g==null?void 0:g.message)||P),h.current=!1,n()},r=()=>{c(!0)},n=()=>{c(!1)},u=()=>{const N={...d,isOpen:!0,staffId:t.staff_id,evidanceId:"all"};i(ee(N))};return e.jsxs("div",{children:[e.jsxs("div",{className:"mt-4",children:[e.jsx(fe,{header:Q,subHeader:Ks,addButton:Xs,addButtonFunction:p,deleteButton:!X.isEmpty(a)&&Ws,deleteButtonFunction:r}),X.isEmpty(a)?e.jsx("p",{children:"No Evidance found..."}):e.jsxs("div",{children:[e.jsx(Ze,{showNumber:Ee,textWidthClassName:"w-40"}),a.length>Ee&&e.jsx("div",{className:"flex justify-end mt-4",children:e.jsx(S,{variant:"solid",size:"sm",onClick:u,children:"...View All"})})]})]}),e.jsx(la,{}),e.jsx(Ke,{isOpen:o,onDialogClose:n,onButtonFunction:l,isLoading:h.current})]})},ra=({data:s,customClassName:i})=>e.jsxs("div",{className:`${i}`,children:[e.jsx(fe,{header:at,subHeader:tt,editButton:st,editButtonText:et,addButton:Qs,addButtonText:Ys}),X.isEmpty(s)?e.jsx("div",{className:"mb-8",children:"No Data Found ..."}):e.jsx(ne,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-7 gap-x-4",children:e.jsx(k,{title:"IPPS NO.",value:s.ippis_no,customClassName:"flex gap-1"})})})]}),oa=({data:s,customClassName:i})=>X.isEmpty(s)?e.jsx("div",{className:"mb-8",children:"No Data Found ..."}):e.jsxs("div",{className:i,children:[e.jsx(fe,{header:ct,subHeader:ot,editButton:rt,editButtonText:nt,addButton:lt,addButtonText:it}),e.jsx(ne,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-y-7 gap-x-4",children:[e.jsx(k,{title:"Recovery Email:",value:s.recovery_email,customClassName:"flex gap-1 w-full truncate"}),e.jsx(k,{title:"Cadre:",value:s.cadre,customClassName:"flex gap-1 w-full truncate"}),e.jsx(k,{title:"Job Title:",value:s.job_title,customClassName:"flex gap-1 w-full truncate"}),e.jsx(k,{title:"Designation:",value:s.designation,customClassName:"flex gap-1 w-full truncate"}),e.jsx(k,{title:"Date of MDA Posting:",value:s.date_of_MDA_posting,customClassName:"flex gap-1 w-full truncate"}),e.jsx(k,{title:"Date of Current Posting:",value:s.date_of_current_posting,customClassName:"flex gap-1 w-full truncate"}),e.jsx(k,{title:"Date of Last Promotion Posting:",value:s.date_of_last_promotion,customClassName:"flex gap-1 w-full truncate"}),e.jsx(k,{title:"Grade Lavel:",value:s.grade_level,customClassName:"flex gap-1 w-full truncate"})]})})]}),ca=({id:s="",isDrawerOpen:i=!1,formId:t="all",onDrawerClose:a})=>{const d=E(c=>c.currentStaffForm),o=()=>{t="all"};return e.jsx(re,{title:e.jsxs("div",{className:"flex gap-2 items-center",children:[t!=="all"&&e.jsx(S,{icon:e.jsx(Je,{}),onClick:o}),e.jsx("h5",{children:dt})]}),isOpen:i,onClose:a,onRequestClose:a,children:e.jsx(Ye,{headerShow:!1,id:s,data:d,showNumber:0,looksClassName:"",onDrawerClassName:"mb-4",onDrawerFormShowClassName:"grid grid-cols-7 gap-2"})})},Ye=({headerShow:s=!0,id:i="",data:t=[],showNumber:a=3,customClassName:d,looksClassName:o="flex flex-col lg:flex-row lg:items-center justify-between gap-3",onDrawerClassName:c,onDrawerFormShowClassName:m="flex items-center w-full overflow-x-scroll overflow-y-hidden gap-3"})=>{const[h,p]=f.useState(!1),l=()=>{p(!0)},r=()=>{p(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:d,children:[s&&e.jsx(fe,{header:ht,subHeader:ut,editButton:a!==0&&t.length>a&&ft,editButtonText:mt,editButtonFunction:l}),X.isEmpty(t)?e.jsx("p",{children:"No Form found..."}):e.jsx("div",{className:"rounded-lg border border-gray-200 dark:border-gray-600",children:t.map((n,u)=>e.jsxs("div",{className:Oe(`${o} p-4`,a!==0&&u>a&&"hidden",!Ge(t,u)&&"border-b border-gray-200 dark:border-gray-600"),children:[e.jsxs("div",{className:`flex items-center gap-3 w-full truncate ${c}`,children:[e.jsx(pe,{title:n.department_name,children:e.jsx("span",{className:"w-20 truncate cursor-default",children:n.department_name})}),">",e.jsx(pe,{title:n.team_name,children:e.jsx("span",{className:"w-20 truncate cursor-default",children:n.team_name})}),">",e.jsx("span",{children:e.jsx(ms,{className:"text-white bg-green-600 border-0",children:n.role})})]}),e.jsxs("div",{className:m,children:[e.jsx(W,{type:Ds,redirect:fs,staffId:i,departmentId:String(n.department_id),teamId:String(n.team_id),clickAble:!0}),e.jsx(W,{type:ks,redirect:us,staffId:i,departmentId:String(n.department_id),teamId:String(n.team_id),clickAble:!0}),e.jsx(W,{type:Vs,redirect:hs,staffId:i,departmentId:String(n.department_id),teamId:String(n.team_id),clickAble:!0}),e.jsx(W,{type:As,redirect:xs,staffId:i,departmentId:String(n.department_id),teamId:String(n.team_id),clickAble:!0}),e.jsx(W,{type:Bs,redirect:ps,staffId:i,departmentId:String(n.department_id),teamId:String(n.team_id),clickAble:!0}),e.jsx(W,{type:Ms,redirect:gs,staffId:i,departmentId:String(n.department_id),teamId:String(n.team_id),clickAble:!0}),e.jsx(W,{type:Rs,redirect:js,staffId:i,departmentId:String(n.department_id),teamId:String(n.team_id),clickAble:!0})]})]},u))})]}),a!==0&&h&&e.jsx(ca,{id:i,isDrawerOpen:h,onDrawerClose:r})]})},da=({imageDetails:s,onValueChange:i,submitButtonShow:t=!1,onSubmit:a})=>{const[d,o]=f.useState(null),[c,m]=f.useState(null);f.useEffect(()=>{if(s!=null&&s.imageFile){const l=s.imageFile,r=URL.createObjectURL(l);return o(r),()=>{URL.revokeObjectURL(r)}}else s!=null&&s.imageUrl?o(s.imageUrl):(o(null),m(null))},[s]);const h=l=>{if(l.length>0){const r=l[0],n=URL.createObjectURL(r);m(r),o(n),i==null||i({imageUrl:n,imageFile:r})}},p=l=>{let r=!0;const n=["image/jpeg","image/png"];if(l)for(const u of l)n.includes(u.type)||(r="Please upload a .jpeg or .png file!");return r};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(ve,{className:"cursor-pointer",showList:!1,uploadLimit:1,beforeUpload:p,onChange:h,children:e.jsx(B,{size:80,src:d,icon:e.jsx(vs,{})})})}),e.jsx("div",{className:"text-right mt-6",children:t&&e.jsx(S,{variant:"solid",onClick:()=>a==null?void 0:a({imageUrl:d,imageFile:c}),children:xt})})]})},ma=({formValue:s=We,type:i,onValueChange:t,handleSubmit:a,submitButton:d=!1,submitButtonText:o="",isSubmit:c=!1,backButton:m=!1,backButtonText:h="",cancelButton:p=!1,cancelButtonText:l="",onCancel:r})=>{const n=pt,u=(g,v)=>{let w=!0;const D=jt,b=vt;if(v.length>=n)return`You can only upload ${n} file(s)`;if(g)for(const V of g)D.includes(V.type)||(w=wt),V.size>=b&&(w=St);return w},N=e.jsx("p",{className:"mt-2",children:gt});return e.jsx(de,{enableReinitialize:!0,initialValues:s,validationSchema:Pt,onSubmit:(g,{setSubmitting:v})=>{a==null||a(g),v(!1)},children:({values:g,errors:v,touched:w,isSubmitting:D})=>e.jsxs(me,{children:[e.jsxs(oe,{children:[e.jsx("div",{className:"",children:e.jsx(T,{label:"Evidance Name",invalid:!!(w.name&&v.name),errorMessage:v.name,children:e.jsx(G,{name:"name",type:"text",placeholder:"Evidance Name",as:Z,value:g.name})})}),e.jsx("div",{className:"",children:e.jsx(T,{label:"Evidance description",labelClass:"!justify-start",invalid:v.description&&w.description,errorMessage:v.description,children:e.jsx(G,{name:"description",placeholder:"Evidance Description",children:({field:b,form:V})=>e.jsx(Cs,{value:b.value,onChange:I=>V.setFieldValue(b.name,I)})})})}),e.jsx("div",{className:"",children:e.jsx(T,{label:"Evidance File",labelClass:"!justify-start",invalid:v.file_path&&w.file_path,errorMessage:v.file_path,children:e.jsx(G,{name:"file_path",children:({field:b,form:V})=>e.jsx(ve,{onChange:I=>V.setFieldValue(b.name,I[0]),beforeUpload:u,onFileRemove:()=>V.setFieldValue(b.name,null),uploadLimit:n,tip:N})})})})]}),e.jsxs("div",{className:"text-right mt-6",children:[p&&e.jsx(S,{className:"ltr:mr-2 rtl:ml-2",variant:"plain",onClick:r,children:l}),d&&e.jsx(S,{variant:"solid",loading:c||D,children:o})]})]})})},fa=s=>{const i=J(),t=E(w=>w.userDetails),a=E(w=>w.currentStaff),{addStaffEvidanceById:d,uploadStaffImage:o}=A(),[c,m]=f.useState({imageUrl:null,imageFile:null}),[h,p]=f.useState(),[l,r]=f.useState(We),n=f.useRef(!1);f.useEffect(()=>{t.type===je&&a.length>0&&p({role:a[0].role,access:a[0].access,permission:a[0].permission,department:a[0].department}),t.type===je&&t.category===Q&&t.action===bt&&console.log("edit"),a.length>0&&m({...c,imageUrl:a[0].img})},[t.type,t.category,t.action,a]);const u=()=>{const w={...t,modal:!1,category:"",action:"",height:"",width:""};i(we(w))},N=async w=>{if(w.imageFile===null&&w.imageUrl===null)y("warning","Please upload a photo");else if(w.imageFile===null&&w.imageUrl!==null)y("warning","You are stay in your previous profile image"),u();else if(w.imageFile!==null){const D={staffId:a[0].staff_id,profile_image:w.imageFile},b=await o(D);y((b==null?void 0:b.status)||U,(b==null?void 0:b.message)||P),u()}else y(U,P)},g=w=>{console.log(w)},v=async w=>{n.current=!0;const D={staff_id:t.id,name:w.name,description:w.description,file_path:w.file_path},b=await d(D);y((b==null?void 0:b.status)||U,(b==null?void 0:b.message)||P),n.current=!1,(b==null?void 0:b.status)==="success"&&u()};return e.jsxs(Y,{isOpen:t.modal,bodyOpenClassName:"overflow-hidden",width:t.width,height:t.height,onClose:u,onRequestClose:u,children:[e.jsx(le,{title:t.category}),e.jsxs("div",{children:[t.category===$e&&e.jsx(e.Fragment,{children:e.jsx(da,{imageDetails:c,submitButtonShow:!0,onSubmit:N})}),t.category===It&&e.jsx(e.Fragment,{children:e.jsx(Et,{headerTag:"h5",formValue:h,buttonNameFirst:Nt,onFormSubmit:g})}),e.jsx("div",{className:"max-h-96 overflow-y-scroll",children:t.category===Q&&t.action===ge&&e.jsx(e.Fragment,{children:e.jsx(ma,{formValue:l,cancelButton:!0,cancelButtonText:Ie,submitButton:!0,submitButtonText:ge,handleSubmit:v,isSubmit:n.current})})})]})]})},ua=s=>{const{id:i}=Te(),t=E(p=>p.currentStaff)[0],a=E(p=>p.currentStaffForm),[d,o]=f.useState(!0),{getStaffById:c,getStaffEvidanceById:m,getStaffFormById:h}=A();return f.useEffect(()=>{(async()=>{if(d){const l=await c(String(i));(l==null?void 0:l.status)!=="success"&&y((l==null?void 0:l.status)||U,(l==null?void 0:l.message)||P);const r=await m(String(i));(r==null?void 0:r.status)!=="success"&&y((r==null?void 0:r.status)||U,(r==null?void 0:r.message)||P);const n=await h(String(i));(n==null?void 0:n.status)!=="success"&&y((n==null?void 0:n.status)||U,(n==null?void 0:n.message)||P)}o(!1)})()},[i]),e.jsxs(ys,{className:"h-full",children:[e.jsx(Ve,{loading:d,children:!X.isEmpty(t)&&e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4",children:[e.jsxs("div",{children:[e.jsx(ea,{data:t}),e.jsx(ra,{data:t,customClassName:"mt-1"}),e.jsx(na,{})]}),e.jsx("div",{className:"w-full",children:e.jsxs(Le,{children:[e.jsx(Ct,{id:t.staff_id,type:je,data:t.permission}),e.jsx(oa,{data:t,customClassName:"mt-4"}),e.jsx(Ye,{id:t.staff_id,data:a,customClassName:"mt-4"})]})})]})}),e.jsx(fa,{}),!d&&X.isEmpty(t)&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx(yt,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No user found!"}),e.jsx("h3",{className:"mt-8",children:"No user found!"})]})]})},ha=s=>e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx("div",{className:"flex flex-auto items-center gap-2",children:e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsx(_e,{height:10}),e.jsx(_e,{height:10,width:"60%"})]})})}),Ha=s=>{const{id:i}=Te(),t=E(I=>I.staff)||[],[a,d]=f.useState(!0),[o,c]=f.useState(""),[m,h]=f.useState(""),[p,l]=f.useState([]),[r,n]=f.useState({value:0,growShrink:0,label:"Total Users"}),[u,N]=f.useState({value:0,growShrink:0,label:"Active Users"}),[g,v]=f.useState({value:0,growShrink:0,label:"Blocked Users"}),{getStaff:w}=A();f.useEffect(()=>{const I=async()=>{const _=await w();(_==null?void 0:_.status)!=="success"&&y((_==null?void 0:_.status)||U,(_==null?void 0:_.message)||P),d(!1)};t.length===0?I():d(!1)},[t]),f.useEffect(()=>{if(o!==""){const R=t.filter(F=>F.name.toLowerCase().includes(o.toLowerCase())||F.email.toLowerCase().includes(o.toLowerCase())||F.staff_id.toLowerCase().includes(o.toLowerCase())||F.ippis_no.toLowerCase().includes(o.toLowerCase()));l(R)}else l(t);const I=t.length,_=t.filter(R=>R.is_active===1).length,M=_/I*100,L=t.filter(R=>R.is_active===0).length,H=L/I*100;n({value:I,growShrink:100,label:"Total Users"}),N({value:_,growShrink:Number(M.toFixed(2)),label:"Active Users"}),v({value:L,growShrink:Number(H.toFixed(2)),label:"Blocked Users"})},[t]);const D=I=>{I.length!==0&&h(""),c(I);const _=t.filter(M=>M.name.toLowerCase().includes(I.toLowerCase())||M.email.toLowerCase().includes(I.toLowerCase())||M.staff_id.toLowerCase().includes(I.toLowerCase())||M.ippis_no.toLowerCase().includes(I.toLowerCase()));l(_)},b=I=>{D(""),h(I)},V=I=>{I===r.label?h(""):I===u.label?h("active"):I===g.label&&h("blocked")};return a?e.jsx(ha,{}):e.jsx(e.Fragment,{children:i==="all"?e.jsxs(e.Fragment,{children:[e.jsx(Ut,{total:r,active:u,blocked:g,onClickedFunction:V}),e.jsxs(Le,{className:"h-full",bodyClass:"h-fulll",children:[e.jsx(Yt,{search:o,onSearch:D,filter:m,onFilter:b}),e.jsx(Ht,{userData:p,filter:m})]})]}):e.jsx(ua,{})})};export{Ha as default};
