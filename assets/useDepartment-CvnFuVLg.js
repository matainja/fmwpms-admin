import{as as o,at as i,h as $,u as g,r as l,c6 as v,c7 as S,c8 as _}from"./index-CDkEqm6-.js";async function O(r){return await o.fetchData({url:`${i}/api/admin/department?year=${r}`,method:"get"})}async function A(r){return await o.fetchData({url:`${i}/api/admin/department`,method:"post",data:r})}async function F(r){return await o.fetchData({url:`${i}/api/admin/department/${r.department_id}`,method:"put",data:r})}async function B(r){const n=await o.fetchData({url:`${i}/api/admin/department/${r.departmentId}`,method:"delete"});return console.log(n),n}async function b(r){return await o.fetchData({url:`${i}/api/admin/team/department_assign_team`,method:"post",data:r})}async function H(r){return await o.fetchData({url:`${i}/api/admin/team/1/remove_team_from_department`,method:"post",data:r})}async function L(r){return await o.fetchData({url:`${i}/api/admin/hr/unassign_departments_for_hr?year=${r}`,method:"get"})}async function T(r,n){return await o.fetchData({url:`${i}/api/admin/hr/departments_for_hr/${r}?year=${n}`,method:"get"})}function P(){const r=$(),n=g(a=>a.year.selectedYear),f=g(a=>a.year.departmentYear),w=g(a=>a.departmentOption),u=l.useRef(!0),d=l.useRef(!1);l.useEffect(()=>{f!==n&&!d.current&&(d.current=!0,(async()=>(await c(),r(v(n))))())},[n]);const E=async()=>await O(n),D=async a=>{if(u.current&&w.length===0)return await c();const s=(a==null?void 0:a.map(({id:t,name:e})=>({departmentId:t,value:e,label:e,isDisabled:!1})))||[];return r(_(s)),{status:"success",message:"Staff option create successfully"}},c=async()=>{var a,s;try{const t=await E();if(t.status===200){const e=t.data;return r(S(e)),u.current&&(u.current=!1,await D(e)),{status:"success",message:"Department data get successfully"}}return{status:"warning",message:"Error in fetching department data"}}catch(t){return console.error("Error fetching department list:",t),{status:"danger",message:((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)||t.toString()}}finally{d.current=!1}};return{createDepartmentOption:D,getDepartment:c,addDepartment:async a=>{var s,t;try{return(await A(a)).status===201?(await c(),{status:"success",message:"Department data get successfully"}):{status:"warning",message:"Error in fetching department data"}}catch(e){return console.error("Error fetching department list:",e),e.status===422?{status:"warning",message:e.response.data.message}:{status:"danger",message:((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.message)||e.toString()}}},editDepartment:async a=>{var s,t;try{return(await F(a)).status===200?(await c(),{status:"success",message:"Department data edit successfully"}):{status:"warning",message:"Error in department data edit"}}catch(e){return console.error("Error in department data edit",e),e.status===422?{status:"warning",message:e.response.data.message}:{status:"danger",message:((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.message)||e.toString()}}},editDepartmentTeam:async a=>{var s,t;try{return(await b(a)).status===201?(await c(),{status:"success",message:"Department team data edit successfully"}):{status:"warning",message:"Error edit department team list"}}catch(e){return console.error("Error edit department team list:",e),e.status===422?{status:"warning",message:e.response.data.message}:{status:"danger",message:((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.message)||e.toString()}}},removeDepartmentTeam:async a=>{var s,t;try{return(await H(a)).status===200?(await c(),{status:"success",message:"Department team data remove successfully"}):{status:"warning",message:"Error remove department team list"}}catch(e){return console.error("Error remove department team list:",e),e.status===422?{status:"warning",message:e.response.data.message}:{status:"danger",message:((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.message)||e.toString()}}},getUnassignDepartmentForHr:async()=>{var a,s;try{const t=await L(n);if(t.status===200){const e=t.data.data;return{status:"success",message:"Department data get successfully",data:(e==null?void 0:e.map(({department_id:h,department_name:m})=>({departmentId:h,value:m,label:m,isDisabled:!1})))||[]}}return{status:"warning",message:"Error in fetching department data"}}catch(t){return console.error("Error fetching department list:",t),{status:"danger",message:((s=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:s.message)||t.toString()}}},getAllDepartmentForHr:async a=>{var s,t;try{const e=await T(a,n);if(e.status===200){const p=e.data.data;return{status:"success",message:"Department data get successfully",data:(p==null?void 0:p.map(({department_id:m,department_name:y})=>({departmentId:m,value:y,label:y,isDisabled:!1})))||[]}}return{status:"warning",message:"Error in fetching department data"}}catch(e){return console.error("Error fetching department list:",e),{status:"danger",message:((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.message)||e.toString()}}}}}export{B as a,P as u};
