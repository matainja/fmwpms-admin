import{as as u,at as c,h as y,u as d,r as f,b_ as S,b$ as D,c0 as _}from"./index-DMOw5CQP.js";async function $(n){return u.fetchData({url:`${c}/api/admin/teams?year=${n}`,method:"get"})}async function E(n){return u.fetchData({url:`${c}/api/admin/teams`,method:"post",data:n})}async function A(n){return u.fetchData({url:`${c}/api/admin/teams/${n.id}`,method:"put",data:n})}async function O(n){return u.fetchData({url:`${c}/api/admin/teams/${n.id}`,method:"delete"})}async function Y(n){return u.fetchData({url:`${c}/api/admin/team/${n.id}/assign_users_to_team`,method:"post",data:n})}async function b(n){return await u.fetchData({url:`${c}/api/admin/team/${n.staff_id}/assign_single_user_to_team`,method:"post",data:n})}function F(){const n=y(),m=d(s=>s.year.selectedYear),T=d(s=>s.year.teamYear),h=d(s=>s.teamOption),o=f.useRef(!0),g=f.useRef(!1);f.useEffect(()=>{T!==m&&!g.current&&(g.current=!0,(async()=>(await i(),n(S(m))))())},[m]);const w=async()=>await $(m),p=async s=>{if(o.current&&h.length===0)return await i();const t=(s==null?void 0:s.map(({id:e,name:a})=>({team_id:String(e),value:a,label:a,isDisabled:!1})))||[];return n(_(t)),{status:"success",message:"Team option create successfully"}},i=async()=>{var s,t;try{const e=await w();if(e.status===200){const a=e.data.data||[];return n(D(a)),o.current&&(o.current=!1,await p(a)),{status:"success",message:e.data.message}}return{status:"warning",message:e.data.message}}catch(e){return console.error("Error fetching Team details:",e),{status:"danger",message:((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.message)||e.toString()}}finally{g.current=!1}};return{createTeamOption:p,getTeam:i,addTeam:async s=>{var t,e;try{const a=await E(s);return a.status===201?(await i(),{status:"success",message:"Team add successfully"}):{status:"warning",message:a.data.message}}catch(a){return console.error("Error add Team details:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((e=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:e.message)||a.toString()}}},editTeam:async s=>{var t,e;try{const a=await A(s);return a.status===200?(await i(),{status:"success",message:a.data.message}):{status:"warning",message:a.data.message}}catch(a){return console.error("Error edit Team details:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((e=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:e.message)||a.toString()}}},deleteTeam:async s=>{var t,e;try{const a=await O(s);return a.status===200?(await i(),{status:"success",message:a.data.message}):{status:"warning",message:a.data.message}}catch(a){return console.error("Error edit Team details:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((e=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:e.message)||a.toString()}}},assignStaffTeam:async s=>{var t,e;try{const a=await Y(s);return a.status===201?(await i(),{status:"success",message:a.data.message}):{status:"warning",message:a.data.message}}catch(a){return console.error("Error assign staff in Team:",a),a.status===422?{status:"warning",message:a.data.message}:{status:"danger",message:((e=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:e.message)||a.toString()}}},assignSingleStaffToTeam:async s=>{var t,e,a,l;try{const r=await b(s);return r.status===201?(await i(),{status:"success",message:r.data.message}):{status:"warning",message:r.data.message}}catch(r){return console.error("Error add single staff to team:",r),r.status===422?{status:"warning",message:((e=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:e.message)||r.toString()}:{status:"danger",message:((l=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:l.message)||r.toString()}}}}}export{F as u};
