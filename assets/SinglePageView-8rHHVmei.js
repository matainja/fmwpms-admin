import{j as s,bj as h,c as y,r as l,aU as f,bA as N,u as j,cX as b}from"./index-DT1ln_eE.js";import{A as C}from"./AdaptableCard-DXq7z7nd.js";import"./SvgIcon-B2V0SAy0.js";import{C as A}from"./Views-Cdm0TVfq.js";import{T as w}from"./TextEllipsis-C54EkwZB.js";import{u as L,H as S}from"./useNavigation-BQ2pplMO.js";import{i as k}from"./isLastChild-BgvHfb_g.js";import{M as E}from"./MediaSkeleton-CjZSKn9k.js";import{U as T}from"./UsersAvatarGroup-C47YAK0p.js";import{R as I}from"./index-54o3matW.js";import{u as R}from"./useArticle-1R7LYRJa.js";import"./cloneDeep-DJN0yfLA.js";import"./useThemeClass-CuCMHnOO.js";import"./acronym-BdEEwC_v.js";const p=e=>{const{height:r,lastChildWidth:t="60%",rowCount:a=3,title:i=!0,titleWidth:m="40%"}=e;return s.jsxs("div",{className:"flex flex-col gap-4",children:[i&&s.jsx(h,{className:"mb-1",height:r,width:m}),Array.from(new Array(a),(x,c)=>c+1).map((x,c)=>s.jsx(h,{height:r,width:c===a-1?t:void 0},x))]})},_=({data:e,isLastChild:r})=>{const{Navigate:t}=L(),a=(i="")=>{t(S,i,e.category)};return s.jsxs("div",{className:y("py-6 group cursor-pointer",!r&&"border-b border-gray-200 dark:border-gray-600"),onClick:()=>a(e.id),children:[s.jsx("h6",{className:"mb-1 group-hover:underline !text-sm",children:e.title}),s.jsx("p",{className:"mb-1",children:s.jsx(w,{text:e.content.replace(/<[^>]*>?/gm,""),maxTextCount:120})})]})},P=({counts:e=2})=>s.jsx("div",{className:"flex flex-col mt-6",children:Array.from(new Array(e),(r,t)=>t+1).map((r,t)=>s.jsxs("div",{children:[s.jsx(p,{rowCount:2}),t!==e-1&&s.jsx("hr",{className:"my-6"})]},r))}),B=({articleId:e,relatedArticle:r})=>{const[t,a]=l.useState(!1);return s.jsx("div",{className:"lg:w-[400px] mt-6 ltr:lg:border-l rtl:lg:border-r border-gray-200 dark:border-gray-600 md:px-8",children:s.jsxs("div",{className:"mb-8",children:[s.jsx("h4",{children:"Related Topics"}),s.jsx(f,{customLoader:s.jsx(P,{}),loading:t,children:r==null?void 0:r.map((i,m)=>s.jsx(_,{data:i,isLastChild:k(r,m)},i.id))})]})})},G=e=>s.jsx("div",{children:"ArticleComments"}),U=({article:e})=>{const[r,t]=l.useState(!1);return l.useEffect(()=>{t(e===null)},[e]),s.jsx(f,{loading:r,customLoader:s.jsxs("div",{className:"flex flex-col gap-8",children:[s.jsx(E,{}),s.jsx(p,{rowCount:6}),s.jsx(p,{rowCount:4}),s.jsx(p,{rowCount:8})]}),children:e!==null&&s.jsxs(s.Fragment,{children:[s.jsx("h3",{children:e.title}),s.jsxs("div",{className:"flex items-center mt-4 gap-4",children:[s.jsx(T,{avatarProps:{size:40},users:e.authors||[]}),s.jsxs("div",{className:"text-xs",children:[s.jsxs("div",{className:"mb-1",children:["Created by:",s.jsx("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:e.createdBy})]}),s.jsxs("div",{children:[s.jsxs("span",{children:["Last updated: ",e.updateTime]}),s.jsx("span",{className:"mx-2",children:"•"}),s.jsxs("span",{children:[e.timeToRead," min read"]}),s.jsx("span",{className:"mx-2",children:"•"}),s.jsxs("span",{children:[e.viewCount," viewed"]})]})]})]}),s.jsx("div",{className:"mt-8 prose dark:prose-invert max-w-none",children:s.jsx("p",{children:I(e.content||"")})}),s.jsx(G,{})]})})},Z=e=>{var u;const{category:r,id:t}=N(),a=j(o=>o.article)||[],[i,m]=l.useState([]),{getArticle:x}=R(),c=l.useRef(!0);l.useEffect(()=>{const o=async()=>{await x(),c.current=!1};a.length===0?o():c.current=!1},[a]),l.useEffect(()=>{const o=a.reduce((n,d)=>(n[d.category]||(n[d.category]=[]),n[d.category].push(d),n),{}),v=Object.entries(o).map(([n,d])=>({value:n,label:n,articles:d||{}}));m(v)},[a]);const g=j(o=>b(o.article,t||""));return s.jsx(A,{children:s.jsxs(C,{bodyClass:"lg:flex gap-4",children:[s.jsx("div",{className:"my-6 max-w-[800px] w-full mx-auto",children:s.jsx(U,{article:g})}),s.jsx(B,{articleId:t||"",relatedArticle:((u=i.find(o=>o.value===String(r)))==null?void 0:u.articles)||[]})]})})};export{Z as default};
