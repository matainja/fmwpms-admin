import{j as e,b7 as U,bx as z,V as T,B as g,by as G,r as d,bz as C,bm as j,bA as O,bB as B,a7 as H,aa as W,bv as R,a8 as $,c as X,T as Y,bp as P,A as q,L as J,P as K,bC as k,u as I,bD as Q,bo as y}from"./index-DWXHjtMR.js";import{H as p}from"./Header-DKnPAL1Q.js";import{u as N,h as Z,i as ee,j as D,k as se,l as te,m as ae,n as re}from"./useNavigation-DOFW-r4i.js";import{F as ne}from"./ForDepartmentAndTeam-B2eK9XOc.js";import{u as S}from"./useAccessibility-ZRLJubV-.js";import"./SvgIcon-DcsB-qw7.js";import{C as ie}from"./Views-Ddp0BTdq.js";import{U as le}from"./UsersAvatarGroup-BZjqZ-Z-.js";import{M as oe,a as ce}from"./index-58a7tIrd.js";import{u as _}from"./useTeam-BGASqtNX.js";import{d as de,a as me}from"./defaultErrorMessage.constant-Bll1G2ZT.js";import{N as xe}from"./NotFound-S8mldMjM.js";import{G as he}from"./index-BbeePwIW.js";import{u as ge}from"./useThemeClass-BhfYO-ba.js";import"./useDepartment-BeY9iVXt.js";import"./lodash-DavE7ptf.js";import"./cloneDeep-DJN0yfLA.js";import"./acronym-CRzJ3K1s.js";import"./DoubleSidedImage-CT0JCnb4.js";const ue=({search:r,onChangeSearch:t})=>{const{Navigate:s}=N(),{canAccess:n}=S(),o=l=>{t(l.target.value)},i=()=>{s(Z)};return e.jsxs("div",{className:"lg:flex items-center justify-between mb-4",children:[e.jsx(p,{title:"Teams",showYear:!0}),e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-1",children:[e.jsx(U,{size:"sm",placeholder:"Search",prefix:e.jsx(z,{className:"text-lg"}),value:r,onChange:o}),e.jsx(ne,{}),n(T)&&e.jsx(g,{size:"sm",variant:"twoTone",icon:e.jsx(G,{}),onClick:i,children:"Add Team"})]})]})},fe=({members:r})=>e.jsx(le,{users:r}),je=({progression:r})=>{const[t,s]=d.useState(!1),n=d.useMemo(()=>r>70?{color:"green-500"}:r<40?{color:"red-500"}:{},[r]);return e.jsxs("div",{className:"relative w-full",children:[t&&e.jsxs("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2 px-2 py-1 text-xs text-white bg-gray-800 rounded-lg shadow-lg whitespace-nowrap",role:"tooltip",children:["Overall Progress",e.jsx("div",{className:"absolute bottom-[-4px] left-1/2 transform -translate-x-1/2 w-2 h-2 bg-gray-800 rotate-45"})]}),e.jsx("div",{onMouseEnter:()=>s(!0),onMouseLeave:()=>s(!1),children:e.jsx(C,{size:"sm",percent:r,...n})})]})},pe=({data:r})=>{const{id:t,name:s,progression:n,description:o,members:i}=r,{Navigate:l}=N(),{deleteTeam:x}=_(),{canAccess:u}=S(),[h,c]=d.useState(!1),[a,m]=d.useState(!1),M=()=>{l(ee,String(t))},V=v=>{v.stopPropagation(),l(D,String(t))},F=v=>{v.stopPropagation(),c(!0)},L=async()=>{m(!0);const v={id:String(t)},f=await x(v);W((f==null?void 0:f.status)||me,(f==null?void 0:f.message)||de),m(!1),c(!1)};return e.jsxs(e.Fragment,{children:[e.jsx(j,{bodyClass:"h-full cursor-pointer",onClick:M,children:e.jsxs("div",{className:"flex flex-col justify-between h-full",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h6",{className:"w-40 md:w-80 lg:w-full truncate",children:s}),e.jsxs("div",{className:"flex",children:[u(T)&&e.jsx(e.Fragment,{children:e.jsx(g,{shape:"circle",variant:"plain",icon:e.jsx(oe,{}),onClick:V})}),u(O)&&e.jsx(e.Fragment,{children:e.jsx(g,{shape:"circle",variant:"plain",icon:e.jsx(ce,{}),onClick:F})})]})]}),e.jsx("p",{className:"mt-4 w-40 md:w-80 lg:w-full truncate",children:o}),e.jsxs("div",{className:"mt-3",children:[n&&e.jsx(je,{progression:n===null?0:n}),e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[e.jsx(fe,{members:i}),e.jsx("div",{className:"flex items-center rounded-full font-semibold text-xs",children:e.jsxs("div",{className:"flex items-center px-2 py-1 border border-gray-300 rounded-full",children:[e.jsx(B,{className:"text-base"}),e.jsx("span",{className:"ml-1 rtl:mr-1 whitespace-nowrap",children:(i==null?void 0:i.length)||0})]})})]})]})]})}),e.jsxs(H,{isOpen:h,onClose:()=>c(!1),children:[e.jsx("h5",{className:"mb-3",children:"Delete Team"}),e.jsxs("p",{className:"mb-6",children:["Are you sure you want to delete ",e.jsx("strong",{children:s}),"?"]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(g,{variant:"plain",onClick:()=>c(!1),children:"Cancel"}),e.jsx(g,{variant:"solid",color:"green",loading:a,onClick:L,children:"Delete"})]})]})]})},E=[{value:5,label:"5 / page"},{value:10,label:"10 / page"},{value:20,label:"20 / page"},{value:50,label:"50 / page"}],ve=({currentPage:r,itemsPerPage:t,onSetCurrentPage:s,onSetItemsPerPage:n,totalPage:o})=>{const i=({value:l})=>{n(l)};return e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx(R,{displayTotal:!0,pageSize:t,total:o,currentPage:r,onChange:s}),e.jsx("div",{style:{minWidth:120},children:e.jsx($,{size:"sm",isSearchable:!1,defaultValue:E[0],options:E,onChange:l=>i(l)})})]})},Ne=({loading:r=!1,teamList:t})=>{const[s,n]=d.useState(1),[o,i]=d.useState(5),l=s*o,x=l-o,u=t.slice(x,l),h=a=>{n(a)},c=a=>{n(1),i(a)};return e.jsxs("div",{className:X("mt-6 h-full flex flex-col"),children:[!r&&t.length===0&&e.jsx("div",{className:"flex justify-center",children:e.jsx(xe,{})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:u.map(a=>e.jsx(pe,{data:a},a.id))}),e.jsx(ve,{currentPage:s,onSetCurrentPage:h,itemsPerPage:o,onSetItemsPerPage:c,totalPage:t.length})]})},be=({id:r,title:t,description:s,progression:n})=>{const{Navigate:o}=N(),{canAccess:i}=S(),l=()=>{o(D,String(r))};return e.jsx("div",{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(j,{className:"md:col-span-2",children:e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(p,{title:t}),e.jsx("div",{className:"md:flex justify-center gap-2",children:i(T)&&e.jsx(e.Fragment,{children:e.jsx(g,{shape:"circle",variant:"twoTone",color:"green-600",icon:e.jsx(he,{}),onClick:l})})})]}),e.jsx("div",{className:"mt-6 break-all",children:s!==""?s:"Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer took a galley of type and scrambled it to make a type specimen book. It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum."})]})}),e.jsx(j,{children:e.jsxs("div",{children:[e.jsx(p,{title:"Progression"}),e.jsx("div",{className:"mt-6",children:e.jsx(C,{variant:"circle",percent:n,width:100,className:"flex justify-center",strokeWidth:4})})]})})]})})},{Tr:A,Th:b,Td:w,THead:we,TBody:Te}=P,Se=r=>{const{textTheme:t}=ge();return e.jsxs("div",{className:"flex items-center",children:[e.jsx(q,{size:28,shape:"circle",src:r.img}),e.jsx(J,{className:`hover:${t} ml-2 rtl:mr-2 font-semibold`,to:`${K}/profile`,children:r.name})]})},ye=({id:r,departmentList:t,userList:s})=>{var h,c;const{Navigate:n}=N(),o=s.filter(a=>a.position.toLowerCase()==="supervisor")||[],i=s.filter(a=>a.position.toLowerCase()==="officer")||[],l=a=>{n(se,String(a))},x=a=>{n(ae,a)},u=()=>{n(te,String(r))};return e.jsxs("div",{className:"",children:[e.jsxs(j,{className:"mt-4",children:[e.jsx(p,{title:"Team Staff Details",titleTag:"h5"}),e.jsxs("div",{className:"mt-4 grid md:grid-cols-2",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("h5",{className:"text-red-600",children:"Supervisor: "}),e.jsx("h5",{children:((h=o[0])==null?void 0:h.name)||""})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("h5",{className:"text-red-600",children:"Officer: "}),e.jsx("h5",{children:((c=i[0])==null?void 0:c.name)||""})]})]})]}),e.jsxs(j,{className:"my-4",children:[e.jsx("div",{className:"flex justify-between",children:e.jsx(p,{title:"Assosiate with Department List",titleTag:"h5"})}),t.length===0&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-4 grid grid-flow-row sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2 w-full items-center",children:"No Data Found..."})}),t&&t.length>0&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-4 grid grid-flow-row sm:grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-2 w-full items-center",children:t.map((a,m)=>e.jsx(Y,{title:a.name,children:e.jsx("button",{type:"button",className:"text-white bg-green-700 hover:bg-green-800 focus:outline-none focus:ring-4 focus:ring-green-300 rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-green-600 dark:hover:bg-green-700 dark:focus:ring-green-800 w-full truncate font-semibold",onClick:()=>l(a.id),children:a.name},m)},m))})})]}),e.jsxs(j,{children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx(p,{title:"Assosiate with User List",titleTag:"h5"}),e.jsx(g,{className:"mr-2 mb-2",variant:"solid",color:"green-600",size:"xs",onClick:u,children:"Assign user"})]}),s.length===0&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-4",children:"No data Found..."})}),s&&s.length>0&&e.jsx(e.Fragment,{children:e.jsx("div",{className:"mt-4",children:e.jsxs(P,{compact:!0,children:[e.jsx(we,{children:e.jsxs(A,{children:[e.jsx(b,{children:"User"}),e.jsx(b,{children:"Position"}),e.jsx(b,{children:"Action"})]})}),e.jsx(Te,{children:s&&s.map((a,m)=>e.jsxs(A,{children:[e.jsx(w,{children:e.jsx(Se,{id:a.staff_id||"-1",name:a.name||"",img:a.img||""})}),e.jsx(w,{children:a.position||"Supervisor"}),e.jsx(w,{children:e.jsx(g,{className:"mr-2 mb-2",variant:"solid",color:"green-600",size:"xs",onClick:()=>x(a.staff_id),children:"View"})})]},m))})]})})})]})]})},Ee=r=>{const{id:t}=k(),[s,n]=d.useState({}),{Navigate:o}=N();t||o(re);const i=I(Q(t||""));return d.useEffect(()=>{n(i||{})},[i]),e.jsxs("div",{children:[e.jsx(be,{id:s.id||"",title:s.name||"",description:s.description||"",progression:s.progression||0}),e.jsx(ye,{id:s.id||"",departmentList:s.department||[],userList:s.members||[]})]})},Ae=r=>e.jsx("div",{className:"flex flex-col gap-4",children:e.jsx("div",{className:"flex flex-auto items-center gap-2",children:e.jsxs("div",{className:"flex flex-col gap-4 w-full",children:[e.jsx(y,{height:10}),e.jsx(y,{height:10,width:"60%"})]})})}),Xe=r=>{const{id:t}=k(),s=I(c=>c.team)||[],[n,o]=d.useState(""),[i,l]=d.useState([]),[x,u]=d.useState(!1);_(),d.useEffect(()=>{},[s]),d.useEffect(()=>{t==="all"&&l(s.slice().reverse())},[s,t]),d.useEffect(()=>{n===""&&l(s.slice().reverse())},[n]);const h=c=>{o(c);const a=s.filter(m=>m.name.toLowerCase().includes(c.toLowerCase()));l(a)};return x?e.jsx(Ae,{}):e.jsx(e.Fragment,{children:t==="all"?e.jsxs(ie,{children:[e.jsx(ue,{search:n,onChangeSearch:h}),e.jsx(Ne,{loading:x,teamList:i||[]})]}):e.jsx(Ee,{})})};export{Xe as default};
