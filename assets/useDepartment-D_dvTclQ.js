import{as as i,at as c,h as $,u as g,r as l,c6 as v,c7 as S,c8 as _}from"./index-BAAWxsLf.js";async function O(r){return await i.fetchData({url:`${c}/api/admin/department?year=${r}`,method:"get"})}async function A(r){return await i.fetchData({url:`${c}/api/admin/department`,method:"post",data:r})}async function F(r){return await i.fetchData({url:`${c}/api/admin/department/${r.department_id}`,method:"put",data:r})}async function b(r){return await i.fetchData({url:`${c}/api/admin/team/department_assign_team`,method:"post",data:r})}async function H(r){return await i.fetchData({url:`${c}/api/admin/team/1/remove_team_from_department`,method:"post",data:r})}async function L(r){return await i.fetchData({url:`${c}/api/admin/hr/unassign_departments_for_hr?year=${r}`,method:"get"})}async function T(r,n){return await i.fetchData({url:`${c}/api/admin/hr/departments_for_hr/${r}?year=${n}`,method:"get"})}function B(){const r=$(),n=g(s=>s.year.selectedYear),f=g(s=>s.year.departmentYear),w=g(s=>s.departmentOption),u=l.useRef(!0),d=l.useRef(!1);l.useEffect(()=>{f!==n&&!d.current&&(d.current=!0,(async()=>(await o(),r(v(n))))())},[n]);const E=async()=>await O(n),D=async s=>{if(u.current&&w.length===0)return await o();const a=(s==null?void 0:s.map(({id:e,name:t})=>({departmentId:e,value:t,label:t,isDisabled:!1})))||[];return r(_(a)),{status:"success",message:"Staff option create successfully"}},o=async()=>{var s,a;try{const e=await E();if(e.status===200){const t=e.data;return r(S(t)),u.current&&(u.current=!1,await D(t)),{status:"success",message:"Department data get successfully"}}return{status:"warning",message:"Error in fetching department data"}}catch(e){return console.error("Error fetching department list:",e),{status:"danger",message:((a=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:a.message)||e.toString()}}finally{d.current=!1}};return{createDepartmentOption:D,getDepartment:o,addDepartment:async s=>{var a,e;try{return(await A(s)).status===201?(await o(),{status:"success",message:"Department data get successfully"}):{status:"warning",message:"Error in fetching department data"}}catch(t){return console.error("Error fetching department list:",t),t.status===422?{status:"warning",message:t.response.data.message}:{status:"danger",message:((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)||t.toString()}}},editDepartment:async s=>{var a,e;try{return(await F(s)).status===200?(await o(),{status:"success",message:"Department data edit successfully"}):{status:"warning",message:"Error in department data edit"}}catch(t){return console.error("Error in department data edit",t),t.status===422?{status:"warning",message:t.response.data.message}:{status:"danger",message:((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)||t.toString()}}},editDepartmentTeam:async s=>{var a,e;try{return(await b(s)).status===201?(await o(),{status:"success",message:"Department team data edit successfully"}):{status:"warning",message:"Error edit department team list"}}catch(t){return console.error("Error edit department team list:",t),t.status===422?{status:"warning",message:t.response.data.message}:{status:"danger",message:((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)||t.toString()}}},removeDepartmentTeam:async s=>{var a,e;try{return(await H(s)).status===200?(await o(),{status:"success",message:"Department team data remove successfully"}):{status:"warning",message:"Error remove department team list"}}catch(t){return console.error("Error remove department team list:",t),t.status===422?{status:"warning",message:t.response.data.message}:{status:"danger",message:((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)||t.toString()}}},getUnassignDepartmentForHr:async()=>{var s,a;try{const e=await L(n);if(e.status===200){const t=e.data.data;return{status:"success",message:"Department data get successfully",data:(t==null?void 0:t.map(({department_id:h,department_name:m})=>({departmentId:h,value:m,label:m,isDisabled:!1})))||[]}}return{status:"warning",message:"Error in fetching department data"}}catch(e){return console.error("Error fetching department list:",e),{status:"danger",message:((a=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:a.message)||e.toString()}}},getAllDepartmentForHr:async s=>{var a,e;try{const t=await T(s,n);if(t.status===200){const p=t.data.data;return{status:"success",message:"Department data get successfully",data:(p==null?void 0:p.map(({department_id:m,department_name:y})=>({departmentId:m,value:y,label:y,isDisabled:!1})))||[]}}return{status:"warning",message:"Error in fetching department data"}}catch(t){return console.error("Error fetching department list:",t),{status:"danger",message:((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)||t.toString()}}}}}export{B as u};
