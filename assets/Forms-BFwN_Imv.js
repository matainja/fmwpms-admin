import{as as O,at as M,h as ms,u as T,dg as ds,dh as ps,di as us,dj as xs,dk as hs,dl as fs,dm as js,r as F,j as e,bh as c,A as q,bJ as gs,T as Qe,bR as bs,bS as de,bT as pe,bU as ue,bV as xe,bW as he,bX as fe,bY as je,aa as S,bx as ys,bk as P,df as ts,dn as ns,dp as is,dq as ls,B as be,bA as ye,dr as Fe,b0 as k,b1 as A,b2 as ae,a8 as ve,b7 as Pe,ds as te,b3 as ce}from"./index-Bgz-HnUo.js";import{d as I,a as D}from"./defaultErrorMessage.constant-Bll1G2ZT.js";import{t as vs,v as Ns,w as ws,x as _s,y as Fs,z as Ps,A as Ts}from"./useNavigation-BW8ifJJL.js";import{u as Ss}from"./useStaff-Dpuc_h4n.js";import{H as le}from"./Header-Bw_05snz.js";import{F as Y}from"./FormImageChoose-BXUOPcYP.js";import{l as N}from"./lodash-Bumr-_Ae.js";import{S as _}from"./StaffInfoFeild-DWBj_Mmb.js";import{i as Is}from"./index-CayX7orp.js";import{F as Te,c as Se,a as Ie,b as E,e as B,j as De}from"./index.esm-DmjiekmR.js";import"./index-BgZKHE3I.js";import"./index-DTYVGFfj.js";import"./cloneDeep-DJN0yfLA.js";async function Ds(s){return await O.fetchData({url:`${M}/api/admin/form_a?department_id=${s.departmentId}&team_id=${s.teamId}&year=${s.year}&staff_id=${s.staffId}`,method:"get"})}async function As(s){return await O.fetchData({url:`${M}/api/admin/form_b?department_id=${s.departmentId}&team_id=${s.teamId}&year=${s.year}&staff_id=${s.staffId}`,method:"get"})}async function Es(s){return await O.fetchData({url:`${M}/api/admin/form_c?department_id=${s.departmentId}&team_id=${s.teamId}&year=${s.year}&staff_id=${s.staffId}`,method:"get"})}async function Cs(s){return await O.fetchData({url:`${M}/api/download?department_id=${s.departmentId}&team_id=${s.teamId}&year=${s.year}&staff_id=${s.staffId}`,method:"get",responseType:"blob"})}async function Rs(s){return await O.fetchData({url:`${M}/api/admin/form_pip?department_id=${s.departmentId}&team_id=${s.teamId}&year=${s.year}&staff_id=${s.staffId}`,method:"get"})}async function $s(s){return await O.fetchData({url:`${M}/api/admin/hr/form_pip_comments`,method:"post",data:s})}async function Os(s){return await O.fetchData({url:`${M}/api/admin/form_idpf?department_id=${s.departmentId}&team_id=${s.teamId}&year=${s.year}&staff_id=${s.staffId}`,method:"get"})}async function Ms(s){return await O.fetchData({url:`${M}/api/admin/hr/form_idpf_comments`,method:"post",data:s})}async function ks(s){return await O.fetchData({url:`${M}/api/admin/form_padf?department_id=${s.departmentId}&team_id=${s.teamId}&year=${s.year}&staff_id=${s.staffId}`,method:"get"})}async function Bs(s){return await O.fetchData({url:`${M}/api/admin/hr/form_padf_comments`,method:"post",data:s})}async function Hs(s){return await O.fetchData({url:`${M}/api/admin/monthly_peroformance_review?department_id=${s.departmentId}&team_id=${s.teamId}&year=${s.year}&month=${s.month}&staff_id=${s.staffId}`,method:"get"})}function Ne(){const s=ms(),a=T(n=>n.year.selectedYear);return{getFormA:async n=>{var m,o;try{n.year=a;const t=await Ds(n);if(t.status===200){const x=t.data;return s(js(x)),{status:"success",message:"Form A details get successfully"}}return{status:"warning",message:"Error fetching Form A details"}}catch(t){return console.error("Error fetching Form A details:",t),{status:"danger",message:((o=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:o.message)||t.toString()}}},getFormB:async n=>{var m,o;try{n.year=a;const t=await As(n);if(t.status===200){const x=t.data;return s(fs(x)),{status:"success",message:"Form B details get successfully"}}return{status:"warning",message:"Error fetching Form B details"}}catch(t){return console.error("Error fetching Form B details:",t),{status:"danger",message:((o=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:o.message)||t.toString()}}},getFormC:async n=>{var m,o;try{n.year=a;const t=await Es(n);if(t.status===200){const x=t.data;return s(hs(x)),{status:"success",message:"Form C details get successfully"}}return{status:"warning",message:"Error fetching Form C details"}}catch(t){return console.error("Error fetching Form C details:",t),{status:"danger",message:((o=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:o.message)||t.toString()}}},getFormCPdf:async n=>{var m,o;try{const t=await Cs(n);return t.status===200?{status:"success",message:"Form C pdf details get successfully",data:t.data}:{status:"warning",message:"Error fetching Form C pdf details"}}catch(t){return console.error("Error fetching Form C pdf details:",t),{status:"danger",message:((o=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:o.message)||t.toString()}}},getFormPIP:async n=>{var m,o;try{n.year=a;const t=await Rs(n);if(t.status===200){const x=t.data;return s(xs(x)),{status:"success",message:"Form PIP details get successfully"}}return{status:"warning",message:"Error fetching Form PIP details"}}catch(t){return console.error("Error fetching Form PIP details:",t),{status:"danger",message:((o=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:o.message)||t.toString()}}},addFormPIPComments:async n=>{var m,o;try{return n.year=a,(await $s(n)).status===200?{status:"success",message:"Form PIP comments successfully"}:{status:"warning",message:"Error fetching Form PIP comments"}}catch(t){return console.error("Error fetching Form PIP comments:",t),{status:"danger",message:((o=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:o.message)||t.toString()}}},getFormIDPF:async n=>{var m,o;try{n.year=a;const t=await Os(n);if(t.status===200){const x=t.data;return s(us(x)),{status:"success",message:"Form IDPF details get successfully"}}return{status:"warning",message:"Error fetching Form IDPF details"}}catch(t){return console.error("Error fetching Form IDPF details:",t),{status:"danger",message:((o=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:o.message)||t.toString()}}},addFormIDPFComments:async n=>{var m,o;try{return n.year=a,(await Ms(n)).status===200?{status:"success",message:"Form IDPF comments successfully"}:{status:"warning",message:"Error fetching Form IDPF comments"}}catch(t){return console.error("Error fetching Form IDPF comments:",t),{status:"danger",message:((o=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:o.message)||t.toString()}}},getFormPADF:async n=>{var m,o;try{n.year=a;const t=await ks(n);if(t.status===200){const x=t.data;return s(ps(x)),{status:"success",message:"Form PADF details get successfully"}}return{status:"warning",message:"Error fetching Form PADF details"}}catch(t){return console.error("Error fetching Form PADF details:",t),{status:"danger",message:((o=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:o.message)||t.toString()}}},addFormPADFComments:async n=>{var m,o;try{return n.year=a,(await Bs(n)).status===200?{status:"success",message:"Form PADF comments successfully"}:{status:"warning",message:"Error fetching Form PADF comments"}}catch(t){return console.error("Error fetching Form PADF comments:",t),{status:"danger",message:((o=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:o.message)||t.toString()}}},getFormMPRF:async n=>{var m,o;try{n.year=a;const t=await Hs(n);if(t.status===200){const x=t.data;return s(ds(x)),{status:"success",message:"Form MPRF details get successfully"}}return{status:"warning",message:"Error fetching Form MPRF details"}}catch(t){return console.error("Error fetching Form MPRF details:",t),{status:"danger",message:((o=(m=t==null?void 0:t.response)==null?void 0:m.data)==null?void 0:o.message)||t.toString()}}}}}const Qs=({formName:s="",staffId:a="",departmentId:r="",teamId:l=""})=>{var d,f;const u=(d=T(b=>b.currentStaff))==null?void 0:d[0],g=(f=T(b=>b.currentStaffForm).filter(b=>String(b.department_id)===String(r)&&String(b.team_id)===String(l)))==null?void 0:f[0],[h,y]=F.useState(!0),{getStaffById:w,getStaffFormById:j}=Ss();return F.useEffect(()=>{const b=async()=>{const n=await w(a);(n==null?void 0:n.status)!=="success"&&S((n==null?void 0:n.status)||D,(n==null?void 0:n.message)||I);const m=await j(a);(m==null?void 0:m.status)!=="success"&&S((m==null?void 0:m.status)||D,(m==null?void 0:m.message)||I),y(!1)};N.isEmpty(u)?b():y(!1)},[]),h?e.jsx("div",{children:"Loading ..."}):e.jsxs("div",{children:[e.jsx(c,{className:"mb-4",children:e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"flex items-center",children:[u.img!==""?e.jsx(q,{className:"mr-4",src:u.img}):e.jsx(q,{className:"mr-4",icon:e.jsx(gs,{})}),e.jsx("div",{className:"text-black font-bold text-xl",children:u.F_name+" "+u.M_name+" "+u.L_name})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3 w-full truncate",children:[e.jsx(Qe,{title:g.department_name,children:e.jsx("span",{className:"w-20 truncate cursor-default",children:g.department_name})}),">",e.jsx(Qe,{title:g.team_name,children:e.jsx("span",{className:"w-20 truncate cursor-default",children:g.team_name})}),">",e.jsx("span",{children:e.jsx(bs,{className:"text-white bg-green-600 border-0",children:g.role})})]}),e.jsxs("div",{className:"flex items-center w-64 md:w-full overflow-x-scroll overflow-y-hidden gap-3",children:[e.jsx(Y,{type:vs,redirect:de,staffId:a,departmentId:r,teamId:l,clickAble:!0}),e.jsx(Y,{type:Ns,redirect:pe,staffId:a,departmentId:r,teamId:l,clickAble:!0}),e.jsx(Y,{type:ws,redirect:ue,staffId:a,departmentId:r,teamId:l,clickAble:!0}),e.jsx(Y,{type:_s,redirect:xe,staffId:a,departmentId:r,teamId:l,clickAble:!0}),e.jsx(Y,{type:Fs,redirect:he,staffId:a,departmentId:r,teamId:l,clickAble:!0}),e.jsx(Y,{type:Ps,redirect:fe,staffId:a,departmentId:r,teamId:l,clickAble:!0}),e.jsx(Y,{type:Ts,redirect:je,staffId:a,departmentId:r,teamId:l,clickAble:!0})]})]})]})}),e.jsx(le,{title:s})]})},Ae="Form Progress",Ls="Appraisal Period Covered",ge=[{label:"Quater 1",value:"1"},{label:"Quater 2",value:"2"},{label:"Quater 3",value:"3"},{label:"Quater 4",value:"4"}],Ee="Employee Task",Ce="Competancy",Re="Operation and Process",$e="staff Comments",Oe="Supervisor Comments",Me="Officer Comments",cs="Overall Assesment",qs="Area concern",Vs="Improvement Plan And Goals",ke="CONFIRMATION AND ACKNOWLEDGEMENT",os="FOR USE ONLY BY THE HUMAN RESOURCE DEPARTMENT",Us="INDIVIDUAL DEVELOPMENT PLAN",Gs="COMPLAINT RELATED TO (TICK AS APPROPRIATE)",Ys="DETAILS OF PERFORMANCE DISPUTE (ATTACH SUPPORTING DOCUMENTS AS REQUIRED)",Ws="FOR USE OF THE MDA HUMAN RESOURCE DEPARTMENT:",Ks="HR Review Information",Xs="Section 3 : CURRENT RESPONSIBILITIES",zs="Section 4: OUTSTANDING PERFORMANCE IDENTIFIED WITHIN THE REVIEW PERIOD",Js="Section 5 : AREAS OF IMPROVEMENTS REQUIRED",Zs="Section 6: TRAINING NEEDS",er="Section 7 : FUTURE GOALS AND SET EXPECTATIONS",sr="SECTION 8 : PROVIDE ANY ADDITIONAL FEEDBACK",rr=({percent:s,text:a})=>e.jsxs("div",{className:"text-center",children:[e.jsxs("h3",{children:[s,"%"]}),e.jsx("span",{children:a})]}),Be=({data:s=0,title:a})=>e.jsx("div",{className:"md:inline-flex items-center",children:e.jsx(ys,{className:"md:mb-0 md:mr-4 mb-4",variant:"circle",percent:s,customInfo:e.jsx(rr,{percent:s,text:a})})}),{TBody:ar,THead:tr,Th:R,Tr:Le,Td:$}=P,ee=({data:s=[]})=>{const a=s.flatMap(r=>r.objectives.map((l,u)=>({...l,kra_id:r.kra_id,kra_name:r.kra_name,kra_weight:r.kra_weight,showKRA:u===0,kraRowSpan:r.objectives.length})));return a.length===0?e.jsx("div",{children:"No data available"}):e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs(P,{className:"w-full border-collapse border border-gray-300 text-sm",children:[e.jsx(tr,{children:e.jsxs(Le,{className:"bg-gray-50 text-gray-700 font-semibold",children:[e.jsx(R,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"KRA Name"}),e.jsx(R,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"KRA Weight"}),e.jsx(R,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Objective Name"}),e.jsx(R,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Gradeed Weight"}),e.jsx(R,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"KPI"}),e.jsx(R,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Unit"}),e.jsx(R,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Target"}),e.jsx(R,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Target Achieved"}),e.jsx(R,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Quater Markes"}),e.jsx(R,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Raw"}),e.jsx(R,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Weighted"})]})}),e.jsx(ar,{children:a.map((r,l)=>e.jsxs(Le,{className:"even:bg-gray-50",children:[r.showKRA&&e.jsxs(e.Fragment,{children:[e.jsx($,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap align-top",rowSpan:r.kraRowSpan,children:r.kra_name}),e.jsx($,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap align-top",rowSpan:r.kraRowSpan,children:r.kra_weight})]}),!r.showKRA&&null,e.jsx($,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.objective_name}),e.jsx($,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.gradeed_weight}),e.jsx($,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.kpi}),e.jsx($,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.unit}),e.jsx($,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.target}),e.jsx($,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.target_achieved}),e.jsx($,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.quater_markes}),e.jsx($,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.raw}),e.jsx($,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.weighted})]},l))})]})})},{TBody:nr,THead:ir,Th:W,Tr:qe,Td:K}=P,se=({data:s})=>{const a=s.flatMap(r=>r.competencies_details.map((l,u)=>({...l,id:r.id,staff_id:r.staff_id,dept_id:r.dept_id,team_id:r.team_id,year:r.year,competencies:r.competencies,quarter:r.quarter,aggregate:r.aggregate,created_at:r.created_at,updated_at:r.updated_at,details_id:l.id,showCOMPETENCIES:u===0,competenciesRowSpan:r.competencies_details.length})));return a.length===0?e.jsx("div",{children:"No competency data"}):e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs(P,{className:"w-full border-collapse border border-gray-300 text-sm",children:[e.jsx(ir,{children:e.jsxs(qe,{className:"bg-gray-50 text-gray-700 font-semibold",children:[e.jsx(W,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"COMPETENCY"}),e.jsx(W,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"CLUSTER"}),e.jsx(W,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"SUB CLUSTER"}),e.jsx(W,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"DESCRIPTION"}),e.jsx(W,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"MIN"}),e.jsx(W,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"MAX"})]})}),e.jsx(nr,{children:a.map((r,l)=>e.jsxs(qe,{className:"even:bg-gray-50",children:[r.showCOMPETENCIES&&e.jsx(e.Fragment,{children:e.jsx(K,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap align-top",rowSpan:r.competenciesRowSpan,children:r.competencies})}),!r.showCOMPETENCIES&&null,e.jsx(K,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.cluster}),e.jsx(K,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.sub_cluster}),e.jsx(K,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.describe_expectations}),e.jsx(K,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.min_score}),e.jsx(K,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.max_score})]},l))})]})})},{TBody:lr,THead:cr,Th:oe,Tr:Ve,Td:me}=P,re=({data:s})=>{const a=s.flatMap(r=>r.details.map((l,u)=>({...l,operations_and_process:r.operations_and_process,details_id:l.id,showOPERATIONANDPROCESS:u===0,operationAndProcessRowSpan:r.details.length})));return a.length===0?e.jsx("div",{children:"No data available"}):e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs(P,{className:"w-full border-collapse border border-gray-300 text-sm",children:[e.jsx(cr,{children:e.jsxs(Ve,{className:"bg-gray-50 text-gray-700 font-semibold",children:[e.jsx(oe,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Operations and Processes"}),e.jsx(oe,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Describe Expectations"}),e.jsx(oe,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Min Score"}),e.jsx(oe,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Max Score"})]})}),e.jsx(lr,{children:a.map((r,l)=>e.jsxs(Ve,{className:"even:bg-gray-50",children:[r.showOPERATIONANDPROCESS&&e.jsx(e.Fragment,{children:e.jsx(me,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap align-top",rowSpan:r.operationAndProcessRowSpan,children:r.operations_and_process})}),!r.showOPERATIONANDPROCESS&&null,e.jsx(me,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.describe_expectations}),e.jsx(me,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.min_score}),e.jsx(me,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.max_score})]},l))})]})})},C=({data:s})=>e.jsxs("div",{children:[e.jsx(_,{title:"Appraisee's Comments",value:s.comment,customClassName:"md:flex gap-4 items-center"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsx(_,{title:"Date",value:s.date,customClassName:"md:flex gap-4 items-center"}),e.jsx(_,{title:"Appraisee's Declaration",value:s.declaration===1?"Aggree":"DisAggress",customClassName:"md:flex gap-4 items-center"}),e.jsxs("div",{className:"md:flex gap-4 items-center",children:[e.jsx("span",{children:"Appraisee's Signature"}),e.jsx("p",{children:s.signature===""?e.jsx(q,{className:"h-full w-full object-contain rounded-md",icon:e.jsx(Is,{})}):e.jsx(q,{className:"h-full w-full object-contain rounded-md",src:s.signature})})]})]})]}),p=({title:s})=>e.jsx("div",{className:"bg-green-600 text-white rounded-md flex items-center ps-4 px-2 mb-4",children:e.jsx("h5",{className:"text-white",children:s})}),or=({data:s})=>{const[a,r]=F.useState(0),l=()=>{switch(a){case 0:return s.progress[1];case 1:return s.progress[2];case 2:return s.progress[3];case 3:return s.progress[4];default:return s.progress[1]}},u=()=>{switch(a){case 0:return"Quater 1";case 1:return"Quater 2";case 2:return"Quater 3";case 3:return"Quater 4";default:return"Quater 1"}};return e.jsxs("div",{children:[e.jsx(c,{className:"mb-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(le,{title:Ae,titleTag:"h5"}),e.jsx(Be,{data:l(),title:u()})]})}),e.jsxs("div",{children:[e.jsxs(ts,{defaultValue:"tab0",onChange:g=>{const h=parseInt(g.replace("tab",""),10);r(h)},children:[e.jsx(ns,{children:ge.map((g,h)=>e.jsx(is,{value:`tab${h}`,children:g.label},h))}),e.jsx("div",{className:"p-4",children:ge.map((g,h)=>{let y=[],w=[],j=[];return h===0?(y=s.employee_task[1],w=s.competencies[1],j=s.operation_and_process[1]):h===1?(y=s.employee_task[2],w=s.competencies[2],j=s.operation_and_process[2]):h===2?(y=s.employee_task[3],w=s.competencies[3],j=s.operation_and_process[3]):h===3&&(y=s.employee_task[4],w=s.competencies[4],j=s.operation_and_process[4]),e.jsxs(ls,{value:`tab${h}`,children:[e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Ee}),e.jsx("div",{children:e.jsx(ee,{data:y})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Ce}),e.jsx("div",{className:"w-full",children:e.jsx(se,{data:w})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Re}),e.jsx("div",{children:e.jsx(re,{data:j})})]})]},h)})})]}),!N.isEmpty(s.comments.staff)&&e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:$e}),e.jsx("div",{children:e.jsx(C,{data:s.comments.staff})})]}),!N.isEmpty(s.comments.supervisor)&&e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Oe}),e.jsx("div",{children:e.jsx(C,{data:s.comments.supervisor})})]}),!N.isEmpty(s.comments.officer)&&e.jsxs(c,{children:[e.jsx(p,{title:Me}),e.jsx("div",{children:e.jsx(C,{data:s.comments.officer})})]})]})]})},{TBody:mr,THead:dr,Th:Ue,Tr:Ge,Td:Ye}=P,ie=({data:s})=>{const a=Object.entries(s).map(([r,l])=>({title:r.replace(/_/g," "),value:l}));return a.length===0?e.jsx("div",{children:"No Overall Assesment data"}):e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs(P,{className:"w-full border-collapse border border-gray-300 text-sm",children:[e.jsx(dr,{children:e.jsxs(Ge,{className:"bg-gray-50 text-gray-700 font-semibold",children:[e.jsx(Ue,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"overall assessment"}),e.jsx(Ue,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"appraiser rating"})]})}),e.jsx(mr,{children:a.map((r,l)=>e.jsxs(Ge,{className:"even:bg-gray-50",children:[e.jsx(Ye,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.title}),e.jsx(Ye,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.value})]},l))})]})})},pr=({data:s})=>{const[a,r]=F.useState(0),l=()=>{switch(a){case 0:return s.progress[1];case 1:return s.progress[2];case 2:return s.progress[3];case 3:return s.progress[4];default:return s.progress[1]}},u=()=>{switch(a){case 0:return"Quater 1";case 1:return"Quater 2";case 2:return"Quater 3";case 3:return"Quater 4";default:return"Quater 1"}};return e.jsxs("div",{children:[e.jsx(c,{className:"mb-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(le,{title:Ae,titleTag:"h5"}),e.jsx(Be,{data:l(),title:u()})]})}),e.jsxs("div",{children:[e.jsxs(ts,{defaultValue:"tab0",onChange:g=>{const h=parseInt(g.replace("tab",""),10);r(h)},children:[e.jsx(ns,{children:ge.map((g,h)=>e.jsx(is,{value:`tab${h}`,children:g.label},h))}),e.jsx("div",{className:"p-4",children:ge.map((g,h)=>{let y=[],w=[],j=[],d=[];return h===0?(y=s.employee_task[1],w=s.competencies[1],j=s.operation_and_process[1],d=s.overall_assesment[1]):h===1?(y=s.employee_task[2],w=s.competencies[2],j=s.operation_and_process[2],d=s.overall_assesment[2]):h===2?(y=s.employee_task[3],w=s.competencies[3],j=s.operation_and_process[3],d=s.overall_assesment[3]):h===3&&(y=s.employee_task[4],w=s.competencies[4],j=s.operation_and_process[4],d=s.overall_assesment[4]),e.jsxs(ls,{value:`tab${h}`,children:[e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Ee}),e.jsx("div",{children:e.jsx(ee,{data:y})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Ce}),e.jsx("div",{className:"w-full",children:e.jsx(se,{data:w})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Re}),e.jsx("div",{children:e.jsx(re,{data:j})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:cs}),e.jsx("div",{className:"mb-4",children:d.length>0&&e.jsx(ie,{data:d[0]})}),e.jsx(c,{className:"mb-4",children:e.jsx(_,{title:"strengths",value:s.others.strengths,customClassName:"flex gap-4"})}),e.jsx(c,{className:"mb-4",children:e.jsx(_,{title:"improvement",value:s.others.improvement,customClassName:"flex gap-4"})})]})]},h)})})]}),!N.isEmpty(s.comments.staff)&&e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:$e}),e.jsx("div",{children:e.jsx(C,{data:s.comments.staff})})]}),!N.isEmpty(s.comments.supervisor)&&e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Oe}),e.jsx("div",{children:e.jsx(C,{data:s.comments.supervisor})})]}),!N.isEmpty(s.comments.officer)&&e.jsxs(c,{children:[e.jsx(p,{title:Me}),e.jsx("div",{children:e.jsx(C,{data:s.comments.officer})})]})]})]})},ur=({data:s,onDownload:a,isDownloading:r=!1})=>{const[l,u]=F.useState(!1),[g,h]=F.useState(0),y=()=>{switch(g){case 0:return s.progress[1];case 1:return s.progress[2];case 2:return s.progress[3];case 3:return s.progress[4];default:return s.progress[1]}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-end mb-8",children:e.jsx(be,{loading:r,variant:"solid",onClick:async()=>{try{await(a==null?void 0:a()),u(!0),setTimeout(()=>u(!1),2e3)}catch(w){console.error("Download failed:",w)}},disabled:r||l,icon:l?e.jsx("svg",{className:"w-5 h-5 text-green-800",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):void 0,children:r?"Downloading...":l?"Downloaded":"Download"})}),e.jsx(c,{className:"mb-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(le,{title:Ae,titleTag:"h5"}),e.jsx(Be,{data:y(),title:""})]})}),e.jsxs("div",{children:[e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Ee}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 1"}),e.jsx("div",{children:e.jsx(ee,{data:s.employee_task[1]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 2"}),e.jsx("div",{children:e.jsx(ee,{data:s.employee_task[2]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 3"}),e.jsx("div",{children:e.jsx(ee,{data:s.employee_task[3]})})]}),e.jsxs("div",{className:"",children:[e.jsx(p,{title:"Quater 4"}),e.jsx("div",{children:e.jsx(ee,{data:s.employee_task[4]})})]})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Ce}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 1"}),e.jsx("div",{children:e.jsx(se,{data:s.competencies[1]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 2"}),e.jsx("div",{children:e.jsx(se,{data:s.competencies[2]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 3"}),e.jsx("div",{children:e.jsx(se,{data:s.competencies[3]})})]}),e.jsxs("div",{className:"",children:[e.jsx(p,{title:"Quater 4"}),e.jsx("div",{children:e.jsx(se,{data:s.competencies[4]})})]})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Re}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 1"}),e.jsx("div",{children:e.jsx(re,{data:s.operation_and_process[1]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 2"}),e.jsx("div",{children:e.jsx(re,{data:s.operation_and_process[2]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 3"}),e.jsx("div",{children:e.jsx(re,{data:s.operation_and_process[3]})})]}),e.jsxs("div",{className:"",children:[e.jsx(p,{title:"Quater 4"}),e.jsx("div",{children:e.jsx(re,{data:s.operation_and_process[4]})})]})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:cs}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 1"}),e.jsx("div",{children:s.overall_assesment[1].length>0&&e.jsx(ie,{data:s.overall_assesment[1][0]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 2"}),e.jsx("div",{children:s.overall_assesment[2].length>0&&e.jsx(ie,{data:s.overall_assesment[2][0]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 3"}),e.jsx("div",{children:s.overall_assesment[3].length>0&&e.jsx(ie,{data:s.overall_assesment[3][0]})})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(p,{title:"Quater 4"}),e.jsx("div",{children:s.overall_assesment[4].length>0&&e.jsx(ie,{data:s.overall_assesment[4][0]})})]}),e.jsx(c,{className:"mb-4",children:e.jsx(_,{title:"strengths",value:s.others.strengths,customClassName:"flex gap-4"})}),e.jsx(c,{className:"mb-4",children:e.jsx(_,{title:"improvement",value:s.others.improvement,customClassName:"flex gap-4"})})]}),!N.isEmpty(s.comments.staff)&&e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:$e}),e.jsx("div",{children:e.jsx(C,{data:s.comments.staff})})]}),!N.isEmpty(s.comments.supervisor)&&e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Oe}),e.jsx("div",{children:e.jsx(C,{data:s.comments.supervisor})})]}),!N.isEmpty(s.comments.officer)&&e.jsxs(c,{children:[e.jsx(p,{title:Me}),e.jsx("div",{children:e.jsx(C,{data:s.comments.officer})})]})]})]})},{TBody:xr,THead:hr,Th:We,Tr:Ke,Td:Xe}=P,fr=({data:s})=>{const a=s;return a.length===0?e.jsx("div",{children:"No Area of Concern data"}):e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs(P,{className:"w-full border-collapse border border-gray-300 text-sm",children:[e.jsx(hr,{children:e.jsxs(Ke,{className:"bg-gray-50 text-gray-700 font-semibold",children:[e.jsx(We,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Area(s) of Needed Improvement"}),e.jsx(We,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Activities Planned to Improve Performance"})]})}),e.jsx(xr,{children:a.map((r,l)=>e.jsxs(Ke,{className:"even:bg-gray-50",children:[e.jsx(Xe,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.areas_of_needed_improvement}),e.jsx(Xe,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.activities_planned_to_improve_performance})]},l))})]})})},{TBody:jr,THead:gr,Th:we,Tr:ze,Td:_e}=P,br=({data:s})=>{const a=s;return a.length===0?e.jsx("div",{children:"No Improvement Plan And Goals data"}):e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs(P,{className:"w-full border-collapse border border-gray-300 text-sm",children:[e.jsx(gr,{children:e.jsxs(ze,{className:"bg-gray-50 text-gray-700 font-semibold",children:[e.jsx(we,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Area(s) of Needed Improvement"}),e.jsx(we,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Activities Planned to Improve Performance"}),e.jsx(we,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Support/Resources to be Provided"})]})}),e.jsx(jr,{children:a.map((r,l)=>e.jsxs(ze,{className:"even:bg-gray-50",children:[e.jsx(_e,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.areas_of_needed_improvement}),e.jsx(_e,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.activities_planned_to_improve_performance}),e.jsx(_e,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.support_resources_to_be_provided})]},l))})]})})},H=({person:s,data:a,title:r})=>{const l=()=>{switch(s){case"staff":return"Staff's Comment";case"supervisor":return"Appraiser Comment";case"hr":return"HR's Comment";default:return"Name"}},u=()=>{switch(s){case"staff":return"Date";case"supervisor":return"Date";case"hr":return"Date of Receipt in HR's Dept.";default:return"Name"}},g=()=>{switch(s){case"staff":return"Staff's Name";case"supervisor":return"Appraiser Name";case"hr":return"HR's Name";default:return"Name"}},h=()=>{switch(s){case"staff":return"Staff’s Declaration";case"supervisor":return"Appraiser Declaration";case"hr":return"HR’s Declaration";default:return"Name"}};return e.jsxs(c,{children:[r&&e.jsx("h5",{children:r}),e.jsx(_,{title:l(),value:a.comment,customClassName:"flex gap-4",customTitleClassName:"font-semibold"}),e.jsx(_,{title:u(),value:a.date,customClassName:"flex gap-4",customTitleClassName:"font-semibold"}),e.jsx(_,{title:g(),value:a.name,customClassName:"flex gap-4",customTitleClassName:"font-semibold"}),e.jsx(_,{title:h(),value:a.declaration===1?"Approved":"Disapproved",customClassName:"flex gap-4",customTitleClassName:"font-semibold"})]})},yr=Se().shape({name:B().required("Required"),comment:B().required("Required"),declaration:De().required("Required"),date:B().required("Required")}),Je=[{label:"Disapproved",value:0},{label:"Approved",value:1}],vr=({data:s})=>{const{departmentId:a,teamId:r,staffId:l}=ye(),u=T(d=>d.year.selectedYear),g=T(d=>d.auth.user.userName),[h,y]=F.useState(Fe),{addFormPIPComments:w}=Ne(),j=F.useRef(!1);return F.useEffect(()=>{j.current=!0,y({...h,name:g||""}),j.current=!1},[]),F.useEffect(()=>{N.isEmpty(s)||(j.current=!0,y({...h,name:g||s.name,date:s.date,declaration:s.declaration,comment:s.comment}),j.current=!1)},[s]),j.current?e.jsx("div",{children:"Loading..."}):e.jsx(c,{children:e.jsx(Te,{enableReinitialize:!0,initialValues:h,validationSchema:yr,onSubmit:async(d,{setSubmitting:f})=>{const b={department_id:a||"",staff_id:l||"",team_id:Number(r),year:u,name:d.name,comment:d.comment,declaration:d.declaration,date:d.date},n=await w(b);S((n==null?void 0:n.status)||D,(n==null?void 0:n.message)||I),f(!1)},children:({touched:d,errors:f,values:b,setFieldValue:n,isSubmitting:m})=>e.jsxs(Ie,{children:[e.jsx(k,{children:e.jsx(A,{label:"Comments",invalid:f.comment&&d.comment,errorMessage:f.comment,children:e.jsx(E,{type:"text",name:"comment",placeholder:"Comment",component:ae,textArea:!0})})}),e.jsxs(k,{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3",children:[e.jsx(A,{label:"Name",invalid:f.name&&d.name,errorMessage:f.name,children:e.jsx(E,{type:"text",name:"name",placeholder:"Name",component:ae,disabled:!0})}),e.jsx(A,{label:"Appraisee Declaration",invalid:f.declaration&&d.declaration,errorMessage:f.declaration,children:e.jsx(E,{type:"text",name:"declaration",placeholder:"Declaration",options:Je,onChange:o=>n("declaration",o.value),value:Je.filter(o=>o.value===b.declaration),component:ve})}),e.jsx(A,{label:"Date",invalid:f.date&&d.date,errorMessage:f.date,children:e.jsx(E,{name:"date",placeholder:"Date",children:({field:o,form:t})=>e.jsx(Pe,{field:o,form:t,value:b.date?new Date(b.date):void 0,onChange:x=>{if(!x)return;const Q=x==null?void 0:x.getFullYear(),V=String((x==null?void 0:x.getMonth())+1).padStart(2,"0"),U=String(x==null?void 0:x.getDate()).padStart(2,"0"),G=`${Q}-${V}-${U}`;t.setFieldValue(o.name,G)}})})})]}),e.jsx(k,{className:"flex justify-end",children:e.jsx(be,{type:"submit",className:"mr-2",variant:"solid",loading:m,children:"Submit"})})]})})})},Nr=({data:s})=>{const a=T(r=>r.auth.user.role);return e.jsxs("div",{children:[e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:qs}),e.jsx("div",{className:"w-full",children:e.jsx(fr,{data:s.area_of_concern})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Vs}),e.jsx("div",{className:"w-full",children:e.jsx(br,{data:s.improvement_plan_and_goals})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:ke}),!N.isEmpty(s.comments.staff)&&e.jsx("div",{className:"w-full mb-4",children:e.jsx(H,{person:"staff",data:s.comments.staff})}),!N.isEmpty(s.comments.supervisor)&&e.jsx("div",{className:"w-full mb-4",children:e.jsx(H,{person:"supervisor",data:s.comments.supervisor})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:os}),!N.isEmpty(s.comments.hr)&&a!==te&&e.jsx("div",{className:"w-full",children:e.jsx(H,{person:"hr",data:s.comments.hr})}),a===te&&e.jsx(vr,{data:s.comments.hr})]})]})},wr=Se().shape({name:B().required("Required"),comment:B().required("Required"),declaration:De().required("Required"),date:B().required("Required")}),Ze=[{label:"Disapproved",value:0},{label:"Approved",value:1}],_r=({data:s})=>{const{departmentId:a,teamId:r,staffId:l}=ye(),u=T(d=>d.year.selectedYear),g=T(d=>d.auth.user.userName),[h,y]=F.useState(Fe),{addFormIDPFComments:w}=Ne(),j=F.useRef(!1);return F.useEffect(()=>{j.current=!0,y({...h,name:g||""}),j.current=!1},[]),F.useEffect(()=>{N.isEmpty(s)||(j.current=!0,y({...h,name:g||s.name,date:s.date,declaration:s.declaration,comment:s.comment}),j.current=!1)},[s]),j.current?e.jsx("div",{children:"Loading..."}):e.jsx(c,{children:e.jsx(Te,{enableReinitialize:!0,initialValues:h,validationSchema:wr,onSubmit:async(d,{setSubmitting:f})=>{const b={department_id:a||"",staff_id:l||"",team_id:Number(r),year:u,name:d.name,comment:d.comment,declaration:d.declaration,date:d.date},n=await w(b);S((n==null?void 0:n.status)||D,(n==null?void 0:n.message)||I),f(!1)},children:({touched:d,errors:f,values:b,setFieldValue:n,isSubmitting:m})=>e.jsxs(Ie,{children:[e.jsx(k,{children:e.jsx(A,{label:"Comments",invalid:f.comment&&d.comment,errorMessage:f.comment,children:e.jsx(E,{type:"text",name:"comment",placeholder:"Comment",component:ae,textArea:!0})})}),e.jsxs(k,{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3",children:[e.jsx(A,{label:"Name",invalid:f.name&&d.name,errorMessage:f.name,children:e.jsx(E,{type:"text",name:"name",placeholder:"Name",component:ae,disabled:!0})}),e.jsx(A,{label:"Appraisee Declaration",invalid:f.declaration&&d.declaration,errorMessage:f.declaration,children:e.jsx(E,{type:"text",name:"declaration",placeholder:"Declaration",options:Ze,onChange:o=>n("declaration",o.value),value:Ze.filter(o=>o.value===b.declaration),component:ve})}),e.jsx(A,{label:"Date",invalid:f.date&&d.date,errorMessage:f.date,children:e.jsx(E,{name:"date",placeholder:"Date",children:({field:o,form:t})=>e.jsx(Pe,{field:o,form:t,value:b.date?new Date(b.date):void 0,onChange:x=>{if(!x)return;const Q=x==null?void 0:x.getFullYear(),V=String((x==null?void 0:x.getMonth())+1).padStart(2,"0"),U=String(x==null?void 0:x.getDate()).padStart(2,"0"),G=`${Q}-${V}-${U}`;t.setFieldValue(o.name,G)}})})})]}),e.jsx(k,{className:"flex justify-end",children:e.jsx(be,{type:"submit",className:"mr-2",variant:"solid",loading:m,children:"Submit"})})]})})})},{TBody:Fr,THead:Pr,Th:X,Tr:es,Td:z}=P,Tr=({data:s})=>{const a=T(r=>r.auth.user.role);return e.jsxs("div",{children:[e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Us}),e.jsx("div",{className:"w-full mb-4",children:e.jsx(_,{title:"Long Term Goal",value:s.idpf_details.long_term_goal,customTitleClassName:"font-semibold",customValueClassName:"h-40 overflow-y-scroll overflow-x-hidden text-justify px-4 mt-4"})}),e.jsx("div",{className:"w-full mb-4",children:e.jsx(_,{title:"Short Term Goal",value:s.idpf_details.short_term_goal,customTitleClassName:"font-semibold",customValueClassName:"h-40 overflow-y-scroll overflow-x-hidden text-justify px-4 mt-4"})}),e.jsx("div",{children:e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs(P,{className:"w-full border-collapse border border-gray-300 text-sm",children:[e.jsx(Pr,{children:e.jsxs(es,{className:"bg-gray-50 text-gray-700 font-semibold",children:[e.jsx(X,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Goal(s)"}),e.jsx(X,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Objective(s)"}),e.jsx(X,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Talents / Strengths"}),e.jsx(X,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Resources Required"}),e.jsx(X,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Measurements"}),e.jsx(X,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Target Date"})]})}),e.jsx(Fr,{children:s.idpf_details.goals.map((r,l)=>e.jsxs(es,{children:[e.jsx(z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.goals}),e.jsx(z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.objectives}),e.jsx(z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.talents}),e.jsx(z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.resources_required}),e.jsx(z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.measurements}),e.jsx(z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.target_date})]},l))})]})})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:ke}),e.jsx("div",{className:"w-full mb-4",children:!N.isEmpty(s.comments.staff)&&e.jsx("div",{className:"w-full mb-4",children:e.jsx(H,{person:"staff",data:s.comments.staff})})}),!N.isEmpty(s.comments.supervisor)&&e.jsx("div",{className:"w-full mb-4",children:e.jsx(H,{person:"supervisor",data:s.comments.supervisor})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:os}),!N.isEmpty(s.comments.hr)&&a!==te&&e.jsx("div",{className:"w-full",children:e.jsx(H,{person:"hr",data:s.comments.hr})}),a===te&&e.jsx(_r,{data:s.comments.hr})]})]})},Sr=Se().shape({name:B().required("Required"),comment:B().required("Required"),declaration:De().required("Required"),date:B().required("Required")}),ss=[{label:"Disapproved",value:0},{label:"Approved",value:1}],Ir=({data:s})=>{const{departmentId:a,teamId:r,staffId:l}=ye(),u=T(d=>d.year.selectedYear),g=T(d=>d.auth.user.userName),[h,y]=F.useState(Fe),{addFormPADFComments:w}=Ne(),j=F.useRef(!1);return F.useEffect(()=>{j.current=!0,y({...h,name:g||""}),j.current=!1},[]),F.useEffect(()=>{N.isEmpty(s)||(j.current=!0,y({...h,name:g||s.name,date:s.date,declaration:s.declaration,comment:s.comment}),j.current=!1)},[s]),j.current?e.jsx("div",{children:"Loading..."}):e.jsx(c,{children:e.jsx(Te,{enableReinitialize:!0,initialValues:h,validationSchema:Sr,onSubmit:async(d,{setSubmitting:f})=>{const b={department_id:a||"",staff_id:l||"",team_id:Number(r),year:u,name:d.name,comment:d.comment,declaration:d.declaration,date:d.date},n=await w(b);S((n==null?void 0:n.status)||D,(n==null?void 0:n.message)||I),f(!1)},children:({touched:d,errors:f,values:b,setFieldValue:n,isSubmitting:m})=>e.jsxs(Ie,{children:[e.jsx(k,{children:e.jsx(A,{label:"Comments",invalid:f.comment&&d.comment,errorMessage:f.comment,children:e.jsx(E,{type:"text",name:"comment",placeholder:"Comment",component:ae,textArea:!0})})}),e.jsxs(k,{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3",children:[e.jsx(A,{label:"Name",invalid:f.name&&d.name,errorMessage:f.name,children:e.jsx(E,{type:"text",name:"name",placeholder:"Name",component:ae,disabled:!0})}),e.jsx(A,{label:"Appraisee Declaration",invalid:f.declaration&&d.declaration,errorMessage:f.declaration,children:e.jsx(E,{type:"text",name:"declaration",placeholder:"Declaration",options:ss,onChange:o=>n("declaration",o.value),value:ss.filter(o=>o.value===b.declaration),component:ve})}),e.jsx(A,{label:"Date",invalid:f.date&&d.date,errorMessage:f.date,children:e.jsx(E,{name:"date",placeholder:"Date",children:({field:o,form:t})=>e.jsx(Pe,{field:o,form:t,value:b.date?new Date(b.date):void 0,onChange:x=>{if(!x)return;const Q=x==null?void 0:x.getFullYear(),V=String((x==null?void 0:x.getMonth())+1).padStart(2,"0"),U=String(x==null?void 0:x.getDate()).padStart(2,"0"),G=`${Q}-${V}-${U}`;t.setFieldValue(o.name,G)}})})})]}),e.jsx(k,{className:"flex justify-end",children:e.jsx(be,{type:"submit",className:"mr-2",variant:"solid",loading:m,children:"Submit"})})]})})})},Dr=({data:s})=>{const a=T(u=>u.auth.user.role),[r,l]=F.useState([]);return F.useEffect(()=>{let u=[];s.padf_details.performance_plan&&u.push("Performance (Plan)"),s.padf_details.quarterly_review&&u.push("Quarterly Review (Review)"),s.padf_details.end_of_year_apprisal&&u.push("End-of-Year Appraisal (Final Appraisal)"),s.padf_details.performence_improvement_plan&&u.push("Performance Improvement Plan (PIP)"),l(u)},[s]),e.jsxs("div",{children:[e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Gs}),e.jsxs("div",{className:"gird sm:grid-cols-2 md:grid-cols-4",children:[e.jsxs(ce,{value:"Performance (Plan)",checked:r.includes("Performance (Plan)"),readOnly:!0,children:["Performance (Plan)"," "]}),e.jsxs(ce,{value:"Quarterly Review (Review)",checked:r.includes("Quarterly Review (Review)"),readOnly:!0,children:["Quarterly Review (Review)"," "]}),e.jsxs(ce,{value:"End-of-Year Appraisal (Final Appraisal)",checked:r.includes("End-of-Year Appraisal (Final Appraisal)"),readOnly:!0,children:["End-of-Year Appraisal (Final Appraisal)"," "]}),e.jsxs(ce,{value:"Performance Improvement Plan (PIP)",checked:r.includes("Performance Improvement Plan (PIP)"),readOnly:!0,children:["Performance Improvement Plan (PIP)"," "]})]})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Ys}),e.jsxs(c,{className:"mb-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(_,{title:"1. Describe the nature and details of the grievance you have. Please be specific:",value:s.padf_details.details_of_performance_dispute})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3",children:[e.jsx(_,{title:"Date of Incidence",value:s.padf_details.date_of_incidence}),e.jsx(_,{title:"Individual(s) Involved:",value:s.padf_details.individuals_involved}),e.jsx(_,{title:"Details of the Dispute",value:s.padf_details.provide_Details})]})]}),e.jsx(c,{className:"mb-4",children:e.jsx("div",{className:"",children:e.jsx(_,{title:"2. How is the grievance affecting your ability to perform on your job?",value:s.padf_details.grievance_affecting})})}),e.jsxs(c,{className:"mb-4",children:[e.jsx("div",{className:"mb-4",children:e.jsx(_,{title:"3. Describe the attempts you have made to resolve the grievance and the outcome(s)?",value:s.padf_details.description})}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-3",children:[e.jsx(_,{title:"Who did you speak to:",value:s.padf_details.who_did_you_speak}),e.jsx(_,{title:"On what dates:",value:s.padf_details.on_what_date}),e.jsx(_,{title:"Response or outcome:",value:s.padf_details.responses})]})]}),e.jsx(c,{className:"mb-4",children:e.jsx("div",{className:"",children:e.jsx(_,{title:"4.Possible Solutions",value:s.padf_details.possible_solutions})})}),e.jsx(c,{className:"",children:e.jsxs("div",{className:"grid gap-4",children:[e.jsx(_,{title:"Upload Supporting Images:"}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 md:grid-cols-4",children:[e.jsx(q,{className:"mr-4 w-full h-full",src:s.padf_details.browse_file_1}),e.jsx(q,{className:"mr-4 w-full h-full",src:s.padf_details.browse_file_2}),e.jsx(q,{className:"mr-4 w-full h-full",src:s.padf_details.browse_file_3}),e.jsx(q,{className:"mr-4 w-full h-full",src:s.padf_details.browse_file_4})]})]})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:ke}),e.jsx("div",{className:"w-full mb-4",children:!N.isEmpty(s.comments.staff)&&e.jsx("div",{className:"w-full mb-4",children:e.jsx(H,{person:"staff",data:s.comments.staff})})}),!N.isEmpty(s.comments.supervisor)&&e.jsx("div",{className:"w-full mb-4",children:e.jsx(H,{person:"supervisor",data:s.comments.supervisor})})]}),e.jsxs(c,{children:[e.jsx(p,{title:Ws}),!N.isEmpty(s.comments.hr)&&a!==te&&e.jsx("div",{className:"w-full mb-4",children:e.jsx(H,{person:"supervisor",data:s.comments.hr,title:Ks})}),a===te&&e.jsx(Ir,{data:s.comments.hr})]})]})},{TBody:Ar,THead:Er,Th:J,Tr:rs,Td:Z}=P,Cr=({data:s})=>{const a=s;return a.length===0?e.jsx("div",{children:"No data available"}):e.jsx("div",{className:"overflow-x-auto w-full",children:e.jsxs(P,{className:"w-full border-collapse border border-gray-300 text-sm",children:[e.jsx(Er,{children:e.jsxs(rs,{className:"bg-gray-50 text-gray-700 font-semibold",children:[e.jsx(J,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"KPI"}),e.jsx(J,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Performance Expectations"}),e.jsx(J,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Start Date"}),e.jsx(J,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Due Date"}),e.jsx(J,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Output Status"}),e.jsx(J,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:"Remarks"})]})}),e.jsx(Ar,{children:a.map((r,l)=>e.jsxs(rs,{className:"even:bg-gray-50",children:[e.jsx(Z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.kpi}),e.jsx(Z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.performance_expectation}),e.jsx(Z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.start_date}),e.jsx(Z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.end_date}),e.jsx(Z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.output_status}),e.jsx(Z,{className:"border border-gray-300 px-4 py-2 whitespace-nowrap",children:r.issues})]},l))})]})})},Rr=({data:s,monthOptions:a,selectedMonth:r,onChangeMonth:l})=>e.jsxs("div",{children:[e.jsx(c,{className:"mb-4",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx(le,{title:Ls,titleTag:"h5"}),e.jsx(ve,{options:a,value:r,onChange:u=>{u&&l(u)},className:"w-40"})]})}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Xs}),e.jsx("div",{children:e.jsx(Cr,{data:s.existing_data})})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:zs}),e.jsx("div",{children:s.extra_details.outstanding_performance?s.extra_details.outstanding_performance:"No data found"})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Js}),e.jsx("div",{children:s.extra_details.areas_of_improvement?s.extra_details.areas_of_improvement:"No data found"})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:Zs}),e.jsx("div",{children:s.extra_details.training_needs?s.extra_details.training_needs:"No data found"})]}),e.jsxs(c,{className:"mb-4",children:[e.jsx(p,{title:er}),e.jsx("div",{children:s.extra_details.future_goals?s.extra_details.future_goals:"No data found"})]}),e.jsxs(c,{children:[e.jsx(p,{title:sr}),N.isEmpty(s.comments)&&e.jsx("div",{children:"No comments"}),!N.isEmpty(s.comments.staff)&&e.jsx(c,{className:"mb-4",children:e.jsx("div",{children:e.jsx(C,{data:s.comments.staff})})}),!N.isEmpty(s.comments.supervisor)&&e.jsx(c,{className:"mb-4",children:e.jsx("div",{children:e.jsx(C,{data:s.comments.supervisor})})}),!N.isEmpty(s.comments.hr)&&e.jsx(c,{children:e.jsx("div",{children:e.jsx(C,{data:s.comments.hr})})})]})]}),as=[{label:"January",value:"1"},{label:"February",value:"2"},{label:"March",value:"3"},{label:"April",value:"4"},{label:"May",value:"5"},{label:"June",value:"6"},{label:"July",value:"7"},{label:"August",value:"8"},{label:"September",value:"9"},{label:"October",value:"10"},{label:"November",value:"11"},{label:"December",value:"12"}],Wr=s=>{const{form:a,departmentId:r,teamId:l,staffId:u}=ye(),{getFormA:g,getFormB:h,getFormC:y,getFormCPdf:w,getFormPIP:j,getFormIDPF:d,getFormPADF:f,getFormMPRF:b}=Ne(),n=T(L=>L.year.selectedYear),m=T(L=>L.currentStaffFormDetails),[o,t]=F.useState(as[0]),[x,Q]=F.useState(!1);F.useEffect(()=>{(async()=>{if(a===de){const v={staffId:String(u)||"",departmentId:String(r)||"",teamId:String(l)||"",year:n},i=await g(v);(i==null?void 0:i.status)!=="success"&&S((i==null?void 0:i.status)||D,(i==null?void 0:i.message)||I)}else if(a===pe){const v={staffId:String(u)||"",departmentId:String(r)||"",teamId:String(l)||"",year:n},i=await h(v);(i==null?void 0:i.status)!=="success"&&S((i==null?void 0:i.status)||D,(i==null?void 0:i.message)||I)}else if(a===ue){const v={staffId:String(u)||"",departmentId:String(r)||"",teamId:String(l)||"",year:n},i=await y(v);(i==null?void 0:i.status)!=="success"&&S((i==null?void 0:i.status)||D,(i==null?void 0:i.message)||I)}else if(a===he){const v={staffId:String(u)||"",departmentId:String(r)||"",teamId:String(l)||"",year:n},i=await j(v);(i==null?void 0:i.status)!=="success"&&S((i==null?void 0:i.status)||D,(i==null?void 0:i.message)||I)}else if(a===fe){const v={staffId:String(u)||"",departmentId:String(r)||"",teamId:String(l)||"",year:n},i=await d(v);(i==null?void 0:i.status)!=="success"&&S((i==null?void 0:i.status)||D,(i==null?void 0:i.message)||I)}else if(a===xe){const v={staffId:String(u)||"",departmentId:String(r)||"",teamId:String(l)||"",year:n},i=await f(v);(i==null?void 0:i.status)!=="success"&&S((i==null?void 0:i.status)||D,(i==null?void 0:i.message)||I)}else if(a===je){const v={staffId:String(u)||"",departmentId:String(r)||"",teamId:String(l)||"",year:n,month:o.value},i=await b(v);(i==null?void 0:i.status)!=="success"&&S((i==null?void 0:i.status)||D,(i==null?void 0:i.message)||I)}})()},[a,r,l,u,o]);const V=()=>{switch(a){case de:return"Form A";case pe:return"Form B";case ue:return"Form C";case he:return"Form PIP";case fe:return"Form IDPF";case xe:return"Form PADF";case je:return"Monthly Performance Review";default:return"Form"}},U=L=>{t(L)},G=async()=>{Q(!0);const L={departmentId:String(r),teamId:String(l),staffId:String(u),year:n},v=await w(L);if(console.log(v==null?void 0:v.data),(v==null?void 0:v.status)==="success"){const i=new Blob([v.data],{type:"application/pdf"}),He=window.URL.createObjectURL(i),ne=document.createElement("a");ne.href=He,ne.setAttribute("download",`form-c-${u}.pdf`),document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),window.URL.revokeObjectURL(He)}else S((v==null?void 0:v.status)||D,(v==null?void 0:v.message)||I);Q(!1)};return e.jsxs("div",{children:[e.jsx(Qs,{formName:V(),staffId:u,departmentId:r,teamId:l}),a===de&&e.jsx(or,{data:m.formA}),a===pe&&e.jsx(pr,{data:m.formB}),a===ue&&e.jsx(ur,{data:m.formC,onDownload:G,isDownloading:x}),a===he&&e.jsx(Nr,{data:m.formPIP}),a===fe&&e.jsx(Tr,{data:m.formIDPF}),a===xe&&e.jsx(Dr,{data:m.formPADF}),a===je&&e.jsx(Rr,{data:m.formMPRF,monthOptions:as,selectedMonth:o,onChangeMonth:U})]})};export{Wr as default};
