import{as as c,at as m,h as w,u as f,r as p,c3 as S,c4 as D,c5 as $}from"./index-DWXHjtMR.js";async function _(n){return c.fetchData({url:`${m}/api/admin/teams?year=${n}`,method:"get"})}async function E(n){const{year:u,...o}=n;return c.fetchData({url:`${m}/api/admin/teams?year=${u}`,method:"post",data:o})}async function A(n){return c.fetchData({url:`${m}/api/admin/teams/${n.id}`,method:"put",data:n})}async function O(n){return c.fetchData({url:`${m}/api/admin/teams/${n.id}`,method:"delete"})}async function Y(n){return c.fetchData({url:`${m}/api/admin/team/${n.id}/assign_users_to_team`,method:"post",data:n})}async function R(n){return await c.fetchData({url:`${m}/api/admin/team/${n.staff_id}/assign_single_user_to_team`,method:"post",data:n})}function F(){const n=w(),u=f(s=>s.year.selectedYear),o=f(s=>s.year.teamYear),y=f(s=>s.teamOption),g=p.useRef(!0),d=p.useRef(!1);p.useEffect(()=>{o!==u&&!d.current&&(d.current=!0,(async()=>(await i(),n(S(u))))())},[u]);const h=async()=>await _(u),l=async s=>{if(g.current&&y.length===0)return await i();const t=(s==null?void 0:s.map(({id:e,name:a})=>({team_id:String(e),value:a,label:a,isDisabled:!1})))||[];return n($(t)),{status:"success",message:"Team option create successfully"}},i=async()=>{var s,t;try{const e=await h();if(e.status===200){const a=e.data.data||[];return n(D(a)),g.current&&(g.current=!1,await l(a)),{status:"success",message:e.data.message}}return{status:"warning",message:e.data.message}}catch(e){return console.error("Error fetching Team details:",e),{status:"danger",message:((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.message)||e.toString()}}finally{d.current=!1}};return{createTeamOption:l,getTeam:i,addTeam:async s=>{var t,e;try{const a=await E(s);return a.status===201?(await i(),{status:"success",message:"Team add successfully"}):{status:"warning",message:a.data.message}}catch(a){return console.error("Error add Team details:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((e=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:e.message)||a.toString()}}},editTeam:async s=>{var t,e;try{const a=await A(s);return a.status===200?(await i(),{status:"success",message:a.data.message}):{status:"warning",message:a.data.message}}catch(a){return console.error("Error edit Team details:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((e=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:e.message)||a.toString()}}},deleteTeam:async s=>{var t,e;try{const a=await O(s);return a.status===200?(await i(),{status:"success",message:a.data.message}):{status:"warning",message:a.data.message}}catch(a){return console.error("Error edit Team details:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((e=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:e.message)||a.toString()}}},assignStaffTeam:async s=>{var t,e;try{const a=await Y(s);return a.status===201?(await i(),{status:"success",message:a.data.message}):{status:"warning",message:a.data.message}}catch(a){return console.error("Error assign staff in Team:",a),a.status===422?{status:"warning",message:a.data.message}:{status:"danger",message:((e=(t=a==null?void 0:a.response)==null?void 0:t.data)==null?void 0:e.message)||a.toString()}}},assignSingleStaffToTeam:async s=>{var t,e,a,T;try{const r=await R(s);return r.status===201?(await i(),{status:"success",message:r.data.message}):{status:"warning",message:r.data.message}}catch(r){return console.error("Error add single staff to team:",r),r.status===422?{status:"warning",message:((e=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:e.message)||r.toString()}:{status:"danger",message:((T=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:T.message)||r.toString()}}}}}export{F as u};
