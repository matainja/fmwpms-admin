import{as as i,at as c,h as A,u as p,r as v,c9 as b,ca as T,cb as C,cc as G,cd as U,ce as k,cf as x,cg as P}from"./index-Dles2GGc.js";async function D(r){return await i.fetchData({url:`${c}/api/admin/staff/${r}`,method:"get"})}async function R(r){return await i.fetchData({url:`${c}/api/admin/evidences/${r}`,method:"get"})}async function N(r){return await i.fetchData({url:`${c}/api/evidences/media/${r}`,method:"get"})}async function Y(r,d){return await i.fetchData({url:`${c}/api/admin/get_role_teamId_departmentId/${r}/${d}`,method:"get"})}async function L(){return await i.fetchData({url:`${c}/api/admin/staff`,method:"get"})}async function j(r){return await i.fetchData({url:`${c}/api/admin/staff`,method:"post",data:r})}async function q(r){return await i.fetchData({url:`${c}/api/admin/bulkuser`,method:"post",headers:{"Content-Type":"multipart/form-data"},data:r})}async function z(r){return await i.fetchData({url:`${c}/api/admin/evidences`,method:"post",headers:{"Content-Type":"multipart/form-data"},data:r})}async function H(r){return await i.fetchData({url:`${c}/api/admin/delete_evidence_according_staff_ids`,method:"post",data:r})}async function J(r){return await i.fetchData({url:`${c}/api/admin/evidences/${r}`,method:"delete"})}async function K(r){return await i.fetchData({url:`${c}/api/admin/staff/${r.staff_id}`,method:"put",data:r})}async function Q(r){return await i.fetchData({url:`${c}/api/admin/update_user_active_status/${r}`,method:"post"})}async function V(r){return await i.fetchData({url:`${c}/api/admin/upload_and_update_image/${r.staffId}`,method:"post",headers:{"Content-Type":"multipart/form-data"},data:r})}async function W(r){return await i.fetchData({url:`${c}/api/admin/user/release`,method:"post",data:r})}async function X(){return await i.fetchData({url:`${c}/api/admin/fetch_user`,method:"get"})}async function Z(r){return await i.fetchData({url:`${c}/api/admin/accept_fetch_user`,method:"post",data:r})}async function M(){return await i.fetchData({url:`${c}/api/download_user_excel`,method:"get",responseType:"blob"})}async function aa(r){return await i.fetchData({url:`${c}/api/admin/change_password`,method:"post",data:r})}async function ta(r){return await i.fetchData({url:`${c}/api/admin/change_ippis_no`,method:"post",data:r})}function ha(){const r=A(),d=p(s=>s.year.selectedYear),I=p(s=>s.staffOption),_=p(s=>s.staffEvidenceOption),g=v.useRef(!0),m=v.useRef(!0),$=async()=>await L(),l=async s=>{if(g.current&&I.length===0)return await u();const e=(s==null?void 0:s.map(({staff_id:t,name:a,img:f})=>({staff_id:t,staff_img:f,value:a,label:a,isDisabled:!1})))||[];return r(x(e)),{status:"success",message:"Staff option create successfully"}},S=async s=>{if(m.current&&_.length===0)return await u();const e=(s==null?void 0:s.filter(({evidence:t})=>t===!0).map(({staff_id:t,name:a,img:f})=>({staff_id:t,staff_img:f,value:a,label:a,isDisabled:!1})))||[];return r(k(e)),{status:"success",message:"Staff option create successfully"}},u=async()=>{var s,e;try{const t=await $();if(t.status===200){const a=t.data;return r(P(a)),g.current&&(g.current=!1,await l(a)),m.current&&(m.current=!1,await S(a)),{status:"success",message:"Staff data get successfully"}}return{status:"warning",message:"Error in fetching staff data"}}catch(t){return console.error("Error fetching staff list:",t),{status:"danger",message:((e=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:e.message)||t.toString()}}},y=async s=>{var e,t;try{const a=await D(s);if(a.status===200){const f=[a.data.data];return r(U(f)),{status:"success",message:"Staff data get successfully"}}return{status:"warning",message:"Error in fetching staff data"}}catch(a){return console.error("Error fetching staff data:",a),{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},B=async s=>{var e,t;try{const a=await D(s);return a.status===200?{status:"success",message:"Staff data get successfully",data:[a.data.data]}:{status:"warning",message:"Error in fetching staff data"}}catch(a){return console.error("Error fetching staff data:",a),{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},o=async s=>{var e,t;try{const a=await R(s);if(a.status===200){const f=a.data.data;return r(G(f)),await u(),{status:"success",message:"Staff Evidance data get successfully"}}return{status:"warning",message:"Error in fetching staff Evidance data"}}catch(a){return console.error("Error fetching staff evidance data:",a),{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}};return{getStaff:u,createStaffOption:l,createStaffOptionForEvidance:S,getStaffById:y,getStaffByIdForTemporaly:B,getStaffEvidanceById:o,getStaffEvidanceFileByIdTemporary:async s=>{var e,t;try{const a=await N(s);return a.status===200?{status:"success",message:"Staff Evidance File data get successfully",data:a.data}:{status:"warning",message:"Error in fetching staff Evidance File data"}}catch(a){return console.error("Error fetching staff evidance File data:",a),{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},getStaffFormById:async s=>{var e,t;try{const a=await Y(s,String(d));if(a.status===200){const f=a.data.data;return r(C(f)),{status:"success",message:"Staff Form data get successfully"}}return{status:"warning",message:"Error in fetching staff Form data"}}catch(a){return console.error("Error fetching staff Form data:",a),{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},addStaffEvidanceById:async s=>{var e,t;try{return(await z(s)).status===201?(await o(s.staff_id),{status:"success",message:"Staff Evidance data get successfully"}):{status:"warning",message:"Error in fetching staff Evidance data"}}catch(a){return console.error("Error fetching staff evidance data:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},deleteStaffEvidanceById:async s=>{var e,t;try{return(await H(s)).status===200?(s.currentStaffId&&s.currentStaffId!==null&&await o(s.currentStaffId),await u(),{status:"success",message:"Staff Evidance data delete successfully"}):{status:"warning",message:"Error in delete staff Evidance data"}}catch(a){return console.error("Error delete staff evidance data:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},deleteStaffEvidanceByEvidanceId:async s=>{var e,t;try{return(await J(s.evidanceId)).status===200?(await o(s.staff_id),{status:"success",message:"Staff Evidance data delete successfully"}):{status:"warning",message:"Error in delete staff Evidance data"}}catch(a){return console.error("Error delete staff evidance data:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},addStaff:async s=>{var e,t,a,f;try{const n=await j(s);return n.status===201?(await u(),{status:"success",message:n.data.message,data:{staff_id:n.data.staff_id,role:n.data.role}}):{status:"warning",message:n.data.message}}catch(n){return console.error("Error add staff details:",n),n.status===422?{status:"warning",message:((t=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:t.message)||n.toString()}:{status:"danger",message:((f=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:f.message)||n.toString()}}},addBulkStaff:async s=>{var e,t,a,f;try{const n=await q(s);return n.status===201?(await u(),{status:"success",message:n.data.message}):{status:"warning",message:n.data.message}}catch(n){return console.error("Error add staff details:",n),n.status===422?{status:"warning",message:((t=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:t.message)||n.toString()}:{status:"danger",message:((f=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:f.message)||n.toString()}}},editStaff:async s=>{var e,t,a,f;try{const n=await K(s);return n.status===200?(await u(),{status:"success",message:n.data.message}):{status:"warning",message:n.data.message}}catch(n){return console.error("Error edit staff details:",n),n.status===422?{status:"warning",message:((t=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:t.message)||n.toString()}:{status:"danger",message:((f=(a=n==null?void 0:n.response)==null?void 0:a.data)==null?void 0:f.message)||n.toString()}}},editStaffActive:async s=>{var e,t;try{const a=await Q(s);if(a.status===200){const f={staff_id:s,is_active:a.data.status};return r(T(f)),{status:"success",message:a.data.message}}return{status:"warning",message:a.data.message}}catch(a){return console.error("Error edit staff details:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},uploadStaffImage:async s=>{var e,t;try{const a=await V(s);return a.status===200?(await u(),await y(s.staffId),{status:"success",message:a.data.message}):{status:"warning",message:a.data.message}}catch(a){return console.error("Error edit staff details:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},transferStaff:async s=>{var e,t;try{const a=await W(s);return a.status===200?(await u(),{status:"success",message:a.data.message}):{status:"warning",message:a.data.message}}catch(a){return console.error("Error edit staff details:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},getFreeStaff:async()=>{var s,e;try{const t=await X();if(t.status===200){const a=t.data.data,f=a.map(({staff_id:F,F_name:w,L_name:h,M_name:E,img:O})=>({staff_id:F,staff_img:O,value:w+" "+E+" "+h,label:w+" "+E+" "+h,isDisabled:!1}))||[];return r(b({freeStaffList:a,freeStaffOption:f})),{status:"success",message:"Staff data get successfully"}}return{status:"warning",message:"Error in fetching staff data"}}catch(t){return console.error("Error fetching free staff list:",t),{status:"danger",message:((e=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:e.message)||t.toString()}}},acceptFetchStaff:async s=>{var e,t;try{const a=await Z(s);return a.status===200?{status:"success",message:a.data.message}:{status:"warning",message:a.data.message}}catch(a){return console.error("Error edit staff details:",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},getStaffDowloadlist:async()=>{var s,e;try{const t=await M();return console.log(t),t.status===200?{status:"success",message:t.data.message,data:t.data}:{status:"warning",message:t.data.message}}catch(t){return console.error("Error Download failed user list",t),t.status===422?{status:"warning",message:t.response.data.message}:{status:"danger",message:((e=(s=t==null?void 0:t.response)==null?void 0:s.data)==null?void 0:e.message)||t.toString()}}},updateStaffPasword:async s=>{var e,t;try{const a=await aa(s);return console.log(a),a.status===200?{status:"success",message:a.data.message}:{status:"warning",message:a.data.message}}catch(a){return console.error("Error password not changed",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}},updateStaffIppisNo:async s=>{var e,t;try{const a=await ta(s);return console.log(a),a.status===200?{status:"success",message:a.data.message}:{status:"warning",message:a.data.message}}catch(a){return console.error("Error password not changed",a),a.status===422?{status:"warning",message:a.response.data.message}:{status:"danger",message:((t=(e=a==null?void 0:a.response)==null?void 0:e.data)==null?void 0:t.message)||a.toString()}}}}}export{ha as u};
